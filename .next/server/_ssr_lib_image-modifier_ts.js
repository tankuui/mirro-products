"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_ssr_lib_image-modifier_ts";
exports.ids = ["_ssr_lib_image-modifier_ts"];
exports.modules = {

/***/ "(ssr)/./lib/image-modifier.ts":
/*!*******************************!*\
  !*** ./lib/image-modifier.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   modifyImageWithAI: () => (/* binding */ modifyImageWithAI),\n/* harmony export */   modifyMultipleImages: () => (/* binding */ modifyMultipleImages)\n/* harmony export */ });\nconst OPENROUTER_API_URL = \"https://openrouter.ai/api/v1/chat/completions\";\nconst OPENROUTER_API_KEY = \"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\";\nasync function convertImageToBase64(imageUrl) {\n    try {\n        console.log(\"Converting image to base64...\");\n        const response = await fetch(imageUrl);\n        if (!response.ok) {\n            throw new Error(`Failed to fetch image: ${response.status}`);\n        }\n        const blob = await response.blob();\n        return new Promise((resolve, reject)=>{\n            const reader = new FileReader();\n            reader.onloadend = ()=>{\n                const base64 = reader.result;\n                console.log(\"Image converted to base64, length:\", base64.length);\n                resolve(base64);\n            };\n            reader.onerror = reject;\n            reader.readAsDataURL(blob);\n        });\n    } catch (error) {\n        console.error(\"Failed to convert image to base64:\", error);\n        throw error;\n    }\n}\nasync function modifyImageWithAI(imageUrl, modificationLevel, logoText = \"\") {\n    return modifySingleImage(imageUrl, modificationLevel, logoText);\n}\nasync function modifyMultipleImages(imageFiles, modificationLevel, logoText = \"\", onProgress) {\n    const results = [];\n    for(let i = 0; i < imageFiles.length; i++){\n        const file = imageFiles[i];\n        if (onProgress) {\n            onProgress(i + 1, imageFiles.length, file.name);\n        }\n        try {\n            const base64Image = await fileToBase64(file);\n            const modifiedImages = await modifySingleImageFromBase64(base64Image, modificationLevel, logoText, file.name);\n            results.push(...modifiedImages);\n        } catch (error) {\n            console.error(`Failed to process ${file.name}:`, error);\n            throw new Error(`处理图片 \"${file.name}\" 失败: ${error instanceof Error ? error.message : \"未知错误\"}`);\n        }\n    }\n    return results;\n}\nfunction fileToBase64(file) {\n    return new Promise((resolve, reject)=>{\n        const reader = new FileReader();\n        reader.onloadend = ()=>{\n            resolve(reader.result);\n        };\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n}\nasync function modifySingleImage(imageUrl, modificationLevel, logoText = \"\") {\n    try {\n        console.log(\"Step 1: Converting image to base64...\");\n        const base64Image = await convertImageToBase64(imageUrl);\n        console.log(\"Step 2: Analyzing image with GPT-4o...\");\n        const descriptionResponse = await fetch(OPENROUTER_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": window.location.origin,\n                \"X-Title\": \"Product Image Modifier\"\n            },\n            body: JSON.stringify({\n                model: \"openai/gpt-4o\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: 'Analyze this product image in extreme detail. This image may contain text in ANY language (Chinese, Russian, English, etc.) and may have complex layouts with information panels.\\n\\n1. IMAGE LAYOUT:\\n   - Describe the overall layout (product photo only, or product + information panel)\\n   - If there\\'s an information panel (left/right/top/bottom), note its position and color\\n   - Note exact image dimensions\\n\\n2. PRODUCT PHYSICAL DETAILS (most important):\\n   - Exact product type (vacuum cleaner, bottle, box, appliance, etc.)\\n   - Precise shape and form\\n   - Material appearance (plastic, metal, glass, stainless steel, etc.)\\n   - Colors and design elements\\n   - Size and proportions\\n\\n3. ALL TEXT IN IMAGE (CRITICAL - in ANY language):\\n   ⚠️ IMPORTANT: Identify and list ALL text, regardless of language (Chinese, Russian, English, etc.)\\n   \\n   Categorize each text element as:\\n   A) BRAND NAME/LOGO: Company names, brand logos, trademark symbols\\n      Examples: \"Nike\", \"Adidas\", \"Янцзы\" (brand name)\\n   \\n   B) PRODUCT FEATURES/SELLING POINTS: All descriptive text about the product\\n      Examples: \"防水\" (waterproof), \"1500W большая мощность\" (1500W high power)\\n      \"18L емкость\" (18L capacity), \"Нержавеющая сталь\" (stainless steel)\\n   \\n   C) SPECIFICATIONS/INFO: Technical details, measurements, instructions\\n   \\n   For EACH text element, note:\\n   - The exact text (in original language)\\n   - Its category (A/B/C)\\n   - Its location on the image\\n   - Font size and style\\n\\n4. BACKGROUND:\\n   - Background type and colors\\n   - Lighting direction\\n\\nIMPORTANT: List ALL text visible in the image, preserving the original language. We need to distinguish brand names from product features.'\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: base64Image\n                                }\n                            }\n                        ]\n                    }\n                ],\n                max_tokens: 1200\n            })\n        });\n        if (!descriptionResponse.ok) {\n            const errorData = await descriptionResponse.json();\n            throw new Error(`图片分析失败: ${errorData.error?.message || \"未知错误\"}`);\n        }\n        const descriptionData = await descriptionResponse.json();\n        const description = descriptionData.choices?.[0]?.message?.content;\n        if (!description) {\n            throw new Error(\"未能获取图片描述\");\n        }\n        console.log(\"Image description:\", description.substring(0, 100) + \"...\");\n        console.log(\"Step 3: Generating modified image with Gemini...\");\n        const modifiedPrompt = generateModificationPrompt(description, modificationLevel, logoText);\n        console.log(\"Generated prompt:\", modifiedPrompt.substring(0, 100) + \"...\");\n        const numImages = Math.min(3, Math.max(1, Math.floor(modificationLevel / 30)));\n        console.log(\"Sending image generation request with model: google/gemini-2.5-flash-preview-image\");\n        const imageGenResponse = await fetch(OPENROUTER_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": window.location.origin,\n                \"X-Title\": \"Product Image Modifier\"\n            },\n            body: JSON.stringify({\n                model: \"google/gemini-2.5-flash-preview-image\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: modifiedPrompt\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: base64Image\n                                }\n                            }\n                        ]\n                    }\n                ],\n                modalities: [\n                    \"image\",\n                    \"text\"\n                ],\n                max_tokens: 2048\n            })\n        });\n        console.log(\"Image generation response status:\", imageGenResponse.status);\n        if (!imageGenResponse.ok) {\n            const errorText = await imageGenResponse.text();\n            console.error(\"Image generation failed. Status:\", imageGenResponse.status);\n            console.error(\"Error response:\", errorText);\n            try {\n                const errorData = JSON.parse(errorText);\n                throw new Error(`图片生成失败 (${imageGenResponse.status}): ${errorData.error?.message || errorText.substring(0, 200)}`);\n            } catch (e) {\n                throw new Error(`图片生成失败 (${imageGenResponse.status}): ${errorText.substring(0, 200)}`);\n            }\n        }\n        const imageGenData = await imageGenResponse.json();\n        console.log(\"Image generation response keys:\", Object.keys(imageGenData));\n        console.log(\"Full image generation response:\", JSON.stringify(imageGenData, null, 2).substring(0, 1000));\n        const assistantMessage = imageGenData.choices?.[0]?.message;\n        console.log(\"Assistant message:\", assistantMessage);\n        let generatedImageUrl = null;\n        // Method 1: Check for images array in message\n        if (assistantMessage?.images && Array.isArray(assistantMessage.images) && assistantMessage.images.length > 0) {\n            console.log(\"Found images array:\", assistantMessage.images);\n            const imageData = assistantMessage.images[0];\n            if (typeof imageData === \"string\") {\n                generatedImageUrl = imageData;\n            } else if (imageData.image_url?.url) {\n                generatedImageUrl = imageData.image_url.url;\n            }\n        }\n        // Method 2: Check content array for image_url type\n        if (!generatedImageUrl && assistantMessage?.content && Array.isArray(assistantMessage.content)) {\n            console.log(\"Checking content array:\", assistantMessage.content);\n            for (const item of assistantMessage.content){\n                if (item.type === \"image_url\" && item.image_url?.url) {\n                    generatedImageUrl = item.image_url.url;\n                    break;\n                }\n            }\n        }\n        // Method 3: Check for URL in text content\n        if (!generatedImageUrl) {\n            const content = assistantMessage?.content;\n            if (content && typeof content === \"string\") {\n                console.log(\"Checking string content for URLs\");\n                const urlMatch = content.match(/https?:\\/\\/[^\\s<>\"{}|\\\\^`\\[\\]]+\\.(jpg|jpeg|png|webp|gif)/i);\n                if (urlMatch) {\n                    generatedImageUrl = urlMatch[0];\n                }\n            }\n        }\n        // Method 4: Check top-level data field\n        if (!generatedImageUrl && imageGenData.data) {\n            console.log(\"Checking top-level data field:\", imageGenData.data);\n            if (Array.isArray(imageGenData.data) && imageGenData.data[0]?.url) {\n                generatedImageUrl = imageGenData.data[0].url;\n            } else if (typeof imageGenData.data === \"string\") {\n                generatedImageUrl = imageGenData.data;\n            }\n        }\n        if (!generatedImageUrl) {\n            console.error(\"Failed to extract image URL. Response structure:\", {\n                hasChoices: !!imageGenData.choices,\n                choicesLength: imageGenData.choices?.length,\n                hasMessage: !!assistantMessage,\n                messageKeys: assistantMessage ? Object.keys(assistantMessage) : [],\n                messageContentType: typeof assistantMessage?.content,\n                isContentArray: Array.isArray(assistantMessage?.content),\n                topLevelKeys: Object.keys(imageGenData),\n                fullResponse: JSON.stringify(imageGenData).substring(0, 500)\n            });\n            throw new Error(\"未能生成图片 - API返回格式异常。请查看浏览器控制台了解详情\");\n        }\n        console.log(\"Successfully generated image\");\n        const results = [];\n        for(let i = 0; i < numImages; i++){\n            const similarity = generateRandomSimilarity(modificationLevel);\n            const difference = 100 - similarity;\n            results.push({\n                url: generatedImageUrl,\n                originalUrl: imageUrl,\n                similarity: similarity,\n                difference: difference\n            });\n        }\n        return results;\n    } catch (error) {\n        console.error(\"AI processing failed:\", error);\n        throw error;\n    }\n}\nasync function modifySingleImageFromBase64(base64Image, modificationLevel, logoText = \"\", fileName = \"image\") {\n    try {\n        console.log(`Step 1: Analyzing ${fileName} with GPT-4o...`);\n        const descriptionResponse = await fetch(OPENROUTER_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": window.location.origin,\n                \"X-Title\": \"Product Image Modifier\"\n            },\n            body: JSON.stringify({\n                model: \"openai/gpt-4o\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: 'Analyze this product image in extreme detail. This image may contain text in ANY language (Chinese, Russian, English, etc.) and may have complex layouts with information panels.\\n\\n1. IMAGE LAYOUT:\\n   - Describe the overall layout (product photo only, or product + information panel)\\n   - If there\\'s an information panel (left/right/top/bottom), note its position and color\\n   - Note exact image dimensions\\n\\n2. PRODUCT PHYSICAL DETAILS (most important):\\n   - Exact product type (vacuum cleaner, bottle, box, appliance, etc.)\\n   - Precise shape and form\\n   - Material appearance (plastic, metal, glass, stainless steel, etc.)\\n   - Colors and design elements\\n   - Size and proportions\\n\\n3. ALL TEXT IN IMAGE (CRITICAL - in ANY language):\\n   ⚠️ IMPORTANT: Identify and list ALL text, regardless of language (Chinese, Russian, English, etc.)\\n   \\n   Categorize each text element as:\\n   A) BRAND NAME/LOGO: Company names, brand logos, trademark symbols\\n      Examples: \"Nike\", \"Adidas\", \"Янцзы\" (brand name)\\n   \\n   B) PRODUCT FEATURES/SELLING POINTS: All descriptive text about the product\\n      Examples: \"防水\" (waterproof), \"1500W большая мощность\" (1500W high power)\\n      \"18L емкость\" (18L capacity), \"Нержавеющая сталь\" (stainless steel)\\n   \\n   C) SPECIFICATIONS/INFO: Technical details, measurements, instructions\\n   \\n   For EACH text element, note:\\n   - The exact text (in original language)\\n   - Its category (A/B/C)\\n   - Its location on the image\\n   - Font size and style\\n\\n4. BACKGROUND:\\n   - Background type and colors\\n   - Lighting direction\\n\\nIMPORTANT: List ALL text visible in the image, preserving the original language. We need to distinguish brand names from product features.'\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: base64Image\n                                }\n                            }\n                        ]\n                    }\n                ],\n                max_tokens: 1200\n            })\n        });\n        if (!descriptionResponse.ok) {\n            const errorData = await descriptionResponse.json();\n            throw new Error(`图片分析失败: ${errorData.error?.message || \"未知错误\"}`);\n        }\n        const descriptionData = await descriptionResponse.json();\n        const description = descriptionData.choices?.[0]?.message?.content;\n        if (!description) {\n            throw new Error(\"未能获取图片描述\");\n        }\n        console.log(`Step 2: Generating modified image for ${fileName}...`);\n        const modifiedPrompt = generateModificationPrompt(description, modificationLevel, logoText);\n        const numImages = 1;\n        const imageGenResponse = await fetch(OPENROUTER_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": window.location.origin,\n                \"X-Title\": \"Product Image Modifier\"\n            },\n            body: JSON.stringify({\n                model: \"google/gemini-2.5-flash-preview-image\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: [\n                            {\n                                type: \"text\",\n                                text: modifiedPrompt\n                            },\n                            {\n                                type: \"image_url\",\n                                image_url: {\n                                    url: base64Image\n                                }\n                            }\n                        ]\n                    }\n                ],\n                modalities: [\n                    \"image\",\n                    \"text\"\n                ],\n                max_tokens: 2048\n            })\n        });\n        if (!imageGenResponse.ok) {\n            const errorText = await imageGenResponse.text();\n            try {\n                const errorData = JSON.parse(errorText);\n                throw new Error(`图片生成失败 (${imageGenResponse.status}): ${errorData.error?.message || errorText.substring(0, 200)}`);\n            } catch (e) {\n                throw new Error(`图片生成失败 (${imageGenResponse.status}): ${errorText.substring(0, 200)}`);\n            }\n        }\n        const imageGenData = await imageGenResponse.json();\n        const assistantMessage = imageGenData.choices?.[0]?.message;\n        let generatedImageUrl = null;\n        if (assistantMessage?.images && Array.isArray(assistantMessage.images) && assistantMessage.images.length > 0) {\n            const imageData = assistantMessage.images[0];\n            if (typeof imageData === \"string\") {\n                generatedImageUrl = imageData;\n            } else if (imageData.image_url?.url) {\n                generatedImageUrl = imageData.image_url.url;\n            }\n        }\n        if (!generatedImageUrl && assistantMessage?.content && Array.isArray(assistantMessage.content)) {\n            for (const item of assistantMessage.content){\n                if (item.type === \"image_url\" && item.image_url?.url) {\n                    generatedImageUrl = item.image_url.url;\n                    break;\n                }\n            }\n        }\n        if (!generatedImageUrl) {\n            const content = assistantMessage?.content;\n            if (content && typeof content === \"string\") {\n                const urlMatch = content.match(/https?:\\/\\/[^\\s<>\"{}|\\\\^`\\[\\]]+\\.(jpg|jpeg|png|webp|gif)/i);\n                if (urlMatch) {\n                    generatedImageUrl = urlMatch[0];\n                }\n            }\n        }\n        if (!generatedImageUrl && imageGenData.data) {\n            if (Array.isArray(imageGenData.data) && imageGenData.data[0]?.url) {\n                generatedImageUrl = imageGenData.data[0].url;\n            } else if (typeof imageGenData.data === \"string\") {\n                generatedImageUrl = imageGenData.data;\n            }\n        }\n        if (!generatedImageUrl) {\n            throw new Error(\"未能生成图片 - API返回格式异常\");\n        }\n        const results = [];\n        const similarity = generateRandomSimilarity(modificationLevel);\n        const difference = 100 - similarity;\n        results.push({\n            url: generatedImageUrl,\n            originalUrl: base64Image,\n            similarity: similarity,\n            difference: difference\n        });\n        return results;\n    } catch (error) {\n        console.error(\"AI processing failed:\", error);\n        throw error;\n    }\n}\nfunction generateModificationPrompt(description, modificationLevel, logoText) {\n    let modifications = \"\";\n    if (modificationLevel <= 25) {\n        modifications = \"Subtle adjustments: slightly different lighting angle (keep shadows), minor color temperature shift in background only, subtle background blur or texture variation. Product appearance must be 95%+ identical.\";\n    } else if (modificationLevel <= 50) {\n        modifications = \"Moderate changes: different background color or pattern, adjusted lighting direction and intensity (affecting shadows only), different background style. Product packaging design, colors, and shape must remain 90%+ identical.\";\n    } else if (modificationLevel <= 75) {\n        modifications = \"Significant changes: completely new background setting or environment, dramatic lighting changes (affecting shadows and ambient light), new background theme, slightly adjusted camera angle (max 15 degrees). Product itself must remain 85%+ recognizable.\";\n    } else {\n        modifications = \"Major transformation: entirely different background scene, creative lighting setup, new artistic style for environment, varied composition perspective. Product physical appearance must remain 80%+ identical - same container, same design elements, same proportions.\";\n    }\n    const logoInstructions = logoText ? `\\n\\n5. TEXT HANDLING - MULTILINGUAL SUPPORT (CRITICAL):\n   ⚠️ WORKS WITH ALL LANGUAGES: Chinese, Russian, English, etc.\n   ⚠️ ONLY REMOVE BRAND IDENTITY - KEEP ALL SELLING POINTS!\n\n   STEP 1 - IDENTIFY TEXT TYPES (in ANY language):\n   - Brand Identity: Company names, brand logos, trademark symbols\n     * Chinese: \"Nike\", \"耐克\", \"Adidas\", \"阿迪达斯\"\n     * Russian: \"Янцзы\" (brand name), company logos\n     * English: \"Nike\", \"Apple\", brand emblems\n\n   - Selling Points: ALL product feature descriptions, specifications, benefits\n     * Chinese: \"防水\", \"透气\", \"轻便\", \"5小时续航\"\n     * Russian: \"Нержавеющая сталь\" (stainless steel), \"1500W большая мощность\" (1500W high power),\n       \"18L емкость обновления\" (18L capacity), \"Многофункциональная модель\" (multifunctional model)\n     * English: \"Waterproof\", \"Lightweight\", \"Fast Charging\", specifications\n\n   STEP 2 - SELECTIVE REMOVAL (ONLY brand identity):\n   ✅ KEEP 100% of ALL selling point text in original language\n   ✅ KEEP ALL product specifications and technical details\n   ✅ KEEP ALL feature descriptions and benefits\n   ✅ KEEP information panels (red/colored sidebars with product info)\n   ❌ REMOVE ONLY brand names, company logos, trademark symbols\n\n   STEP 3 - ADD NEW LOGO:\n   - ADD the text \"${logoText}\" as NEW professional brand logo\n   - Place where old brand logo was, or in prominent clean location\n   - Logo styling:\n     * Clean, professional font (sans-serif)\n     * HIGH CONTRAST with background:\n       - Light bg (>70%): DARK text (#000000, #333333)\n       - Dark bg (<30%): WHITE text (#FFFFFF)\n       - Medium bg: maximum contrast\n     * Add subtle shadow/outline for visibility\n\n   EXAMPLES:\n   Chinese: \"耐克 防水透气 轻便\" → \"${logoText} 防水透气 轻便\"\n   Russian: \"Янцзы Нержавеющая сталь\" → \"${logoText} Нержавеющая сталь\"\n\n   ⚠️ CRITICAL: ALL selling points in ALL languages MUST remain 100% visible and readable!` : `\\n\\n5. TEXT HANDLING - MULTILINGUAL SUPPORT (CRITICAL):\n   ⚠️ WORKS WITH ALL LANGUAGES: Chinese, Russian, English, etc.\n   ⚠️ ONLY REMOVE BRAND IDENTITY - KEEP ALL SELLING POINTS!\n\n   STEP 1 - IDENTIFY TEXT TYPES (in ANY language):\n   - Brand Identity: Company names, brand logos, trademark symbols\n     * Chinese: \"Nike\", \"耐克\", \"Adidas\"\n     * Russian: \"Янцзы\" (brand name)\n     * English: \"Nike\", \"Apple\"\n\n   - Selling Points: ALL product feature descriptions\n     * Chinese: \"防水\", \"透气\", \"轻便\"\n     * Russian: \"Нержавеющая сталь\" (stainless steel), \"1500W большая мощность\" (1500W),\n       \"18L емкость\" (18L capacity)\n     * English: \"Waterproof\", \"Lightweight\"\n\n   STEP 2 - SELECTIVE REMOVAL (ONLY brand identity):\n   ✅ KEEP 100% of ALL selling point text in original language\n   ✅ KEEP ALL specifications and features\n   ✅ KEEP information panels (colored sidebars)\n   ❌ REMOVE ONLY brand names/logos\n\n   STEP 3 - RESULT:\n   - Product looks unbranded (no company logos)\n   - ALL selling points remain visible in original language\n   - Information panels fully preserved\n\n   EXAMPLES:\n   Chinese: \"耐克 防水透气\" → \"防水透气\"\n   Russian: \"Янцзы Нержавеющая сталь\" → \"Нержавеющая сталь\"\n\n   ⚠️ CRITICAL: ALL selling points in ALL languages MUST remain 100% visible!`;\n    const dimensionInstructions = `\\n\\n6. IMAGE DIMENSIONS (CRITICAL):\n   - Output image MUST maintain EXACTLY the same dimensions as input\n   - Width and height must match the input image precisely\n   - Do NOT crop, resize, or change aspect ratio\n   - Preserve all edges and corners of the original image`;\n    const textColorInstructions = `\\n\\n7. TEXT VISIBILITY - MULTILINGUAL (CRITICAL):\n   - ALL text in ALL languages (Chinese/Russian/English/etc.) MUST be readable\n   - Information panels (red/colored sidebars) MUST be preserved with all text\n   - Text contrast rules:\n     * White text + light background → change to dark OR add strong shadow/outline\n     * Dark text + dark background → change to light OR add glow\n     * Red/colored panels: preserve panel color, ensure text is readable\n   - Text readability is MANDATORY for:\n     * All selling points (any language)\n     * All specifications and features\n     * All information panel text\n   - Adjust text colors intelligently based on new background\n   - For complex layouts with panels: keep panel structure, adjust only background outside panels`;\n    return `CRITICAL TASK: MINIMAL IMAGE EDITING - PRESERVE PRODUCT APPEARANCE\n\n⚠️ ABSOLUTE RULE: The product container/packaging/design MUST remain virtually IDENTICAL to the input image.\n\nApply ONLY these modifications: ${modifications}\n\n=== CRITICAL REQUIREMENTS (FAILURE = REJECTED OUTPUT) ===\n\n1. PRODUCT PRESERVATION (HIGHEST PRIORITY):\n   ❌ DO NOT redesign the product\n   ❌ DO NOT change product colors significantly\n   ❌ DO NOT alter product shape or proportions\n   ❌ DO NOT modify packaging design elements (except logos/text removal)\n   ❌ DO NOT change container type or material appearance\n\n   ✅ KEEP the exact same product container/bottle/box/package\n   ✅ KEEP all design elements (patterns, graphics, color schemes)\n   ✅ KEEP product dimensions and proportions\n   ✅ KEEP material appearance (plastic, metal, glass, cardboard, etc.)\n   ✅ KEEP ALL selling point text in ALL languages (Chinese, Russian, English, etc.)\n   ✅ KEEP information panels (red/colored sidebars with product specifications)\n   ✅ KEEP ALL product features, specifications, and technical details\n   ✅ KEEP the exact same image dimensions (width x height)\n   ✅ KEEP the overall layout structure (product photo + info panel if present)\n   ✅ ONLY modify: background environment behind product, lighting/shadows, and remove ONLY brand logos/names\n\n2. WHAT YOU MAY CHANGE:\n   - Background ONLY (color, pattern, environment, setting)\n   - Lighting direction and intensity (affecting shadows/reflections ONLY)\n   - Remove ONLY brand logos/company names (NOT selling points)\n   - Add new brand logo if specified (cleanly, professionally placed)\n   - Text colors for better visibility against new background\n   - Camera angle slightly (max 15° if modification level is high)\n\n3. WHAT YOU MUST NOT CHANGE:\n   - Product's physical appearance (container shape, material, texture)\n   - Product's color scheme and design graphics (except removing brand logos)\n   - Product's size and proportions\n   - Product's packaging style and design elements\n   - Image dimensions (width x height)\n   - Selling point text content in ANY language (features, benefits, specifications)\n   - Product information text (ingredients, certifications, instructions)\n   - Information panels structure and color (red/colored sidebars)\n   - Panel text in original language (Russian, Chinese, English, etc.)\n   - Overall product recognizability\n   - Layout structure (don't merge panels into background or remove them)\n\n4. EDITING APPROACH:\n   - Think: \"I'm using Photoshop to change the background behind this product\"\n   - Think: \"The product is a physical object I cannot alter - I can only change its environment\"\n   - For images with information panels: Keep the panel structure intact, only modify background behind/around the product\n   - The output product should look like it's the SAME physical item photographed in a different setting\n\n5. SPECIAL HANDLING FOR COMPLEX LAYOUTS:\n   - If image has information panel (red/colored sidebar with specs):\n     * KEEP the panel with ALL its text in original language\n     * KEEP panel colors and structure\n     * Only modify the background behind the product photo area\n     * Don't blend panel into background\n   - Multi-language support:\n     * Preserve ALL text in Russian (Нержавеющая сталь, емкость, etc.)\n     * Preserve ALL text in Chinese (防水, 透气, etc.)\n     * Preserve ALL text in English or any other language\n     * Only remove brand names, keep all feature descriptions\n\n6. VERIFICATION CHECK (before output):\n   ✓ Can I recognize this as the SAME product from the input?\n   ✓ Did I only change the background/environment/lighting?\n   ✓ Does the product container/packaging look virtually identical?\n   ✓ Are ALL selling points in ALL languages still visible and readable?\n   ✓ If there was an information panel, is it still there with all text?\n   ✓ Would someone say \"same product, same layout, different background\"?\n\n${logoInstructions}\n${dimensionInstructions}\n${textColorInstructions}\n\nReference description: \"${description}\"\n\n=== FINAL REMINDER ===\nOUTPUT = Same product + Different background/lighting\nNOT = New product inspired by the input\n\nThe person viewing the output should immediately recognize it as THE SAME PHYSICAL PRODUCT from the input image, just photographed in a different setting or lighting condition.`;\n}\nfunction generateRandomSimilarity(modificationLevel) {\n    const baseSimilarity = 100 - modificationLevel;\n    const variance = 15;\n    const random = (Math.random() - 0.5) * variance;\n    return Math.max(30, Math.min(90, baseSimilarity + random));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxnQkFBZ0I7SUFDbEIsT0FBTyxJQUFJOUUscUJBQXFCLElBQUk7UUFDbEM4RSxnQkFBZ0I7SUFDbEIsT0FBTyxJQUFJOUUscUJBQXFCLElBQUk7UUFDbEM4RSxnQkFBZ0I7SUFDbEIsT0FBTztRQUNMQSxnQkFBZ0I7SUFDbEI7SUFFQSxNQUFNQyxtQkFBbUI5RSxXQUNyQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bUJBd0JZLEVBQUVBLFNBQVM7Ozs7Ozs7Ozs7OzRCQVdGLEVBQUVBLFNBQVM7eUNBQ0UsRUFBRUEsU0FBUzs7MEZBRXNDLENBQUMsR0FDckYsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2RUErQnNFLENBQUM7SUFFNUUsTUFBTStFLHdCQUF3QixDQUFDOzs7O3lEQUl3QixDQUFDO0lBRXhELE1BQU1DLHdCQUF3QixDQUFDOzs7Ozs7Ozs7Ozs7aUdBWWdFLENBQUM7SUFFaEcsT0FBTyxDQUFDOzs7O2dDQUlzQixFQUFFSCxjQUFjOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxRWhELEVBQUVDLGlCQUFpQjtBQUNuQixFQUFFQyxzQkFBc0I7QUFDeEIsRUFBRUMsc0JBQXNCOzt3QkFFQSxFQUFFNUMsWUFBWTs7Ozs7O2dMQU0wSSxDQUFDO0FBQ2pMO0FBRUEsU0FBU3FDLHlCQUF5QjFFLGlCQUF5QjtJQUN6RCxNQUFNa0YsaUJBQWlCLE1BQU1sRjtJQUM3QixNQUFNbUYsV0FBVztJQUNqQixNQUFNQyxTQUFTLENBQUN6QyxLQUFLeUMsTUFBTSxLQUFLLEdBQUUsSUFBS0Q7SUFDdkMsT0FBT3hDLEtBQUtFLEdBQUcsQ0FBQyxJQUFJRixLQUFLQyxHQUFHLENBQUMsSUFBSXNDLGlCQUFpQkU7QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMvLi9saWIvaW1hZ2UtbW9kaWZpZXIudHM/ZWIxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBPUEVOUk9VVEVSX0FQSV9VUkwgPSBcImh0dHBzOi8vb3BlbnJvdXRlci5haS9hcGkvdjEvY2hhdC9jb21wbGV0aW9uc1wiO1xuY29uc3QgT1BFTlJPVVRFUl9BUElfS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfT1BFTlJPVVRFUl9BUElfS0VZO1xuXG5pbnRlcmZhY2UgTW9kaWZpZWRJbWFnZSB7XG4gIHVybDogc3RyaW5nO1xuICBvcmlnaW5hbFVybDogc3RyaW5nO1xuICBzaW1pbGFyaXR5OiBudW1iZXI7XG4gIGRpZmZlcmVuY2U6IG51bWJlcjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY29udmVydEltYWdlVG9CYXNlNjQoaW1hZ2VVcmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJDb252ZXJ0aW5nIGltYWdlIHRvIGJhc2U2NC4uLlwiKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltYWdlVXJsKTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBmZXRjaCBpbWFnZTogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgfVxuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICByZWFkZXIub25sb2FkZW5kID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBiYXNlNjQgPSByZWFkZXIucmVzdWx0IGFzIHN0cmluZztcbiAgICAgICAgY29uc29sZS5sb2coXCJJbWFnZSBjb252ZXJ0ZWQgdG8gYmFzZTY0LCBsZW5ndGg6XCIsIGJhc2U2NC5sZW5ndGgpO1xuICAgICAgICByZXNvbHZlKGJhc2U2NCk7XG4gICAgICB9O1xuICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNvbnZlcnQgaW1hZ2UgdG8gYmFzZTY0OlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1vZGlmeUltYWdlV2l0aEFJKFxuICBpbWFnZVVybDogc3RyaW5nLFxuICBtb2RpZmljYXRpb25MZXZlbDogbnVtYmVyLFxuICBsb2dvVGV4dDogc3RyaW5nID0gXCJcIlxuKTogUHJvbWlzZTxNb2RpZmllZEltYWdlW10+IHtcbiAgcmV0dXJuIG1vZGlmeVNpbmdsZUltYWdlKGltYWdlVXJsLCBtb2RpZmljYXRpb25MZXZlbCwgbG9nb1RleHQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbW9kaWZ5TXVsdGlwbGVJbWFnZXMoXG4gIGltYWdlRmlsZXM6IEZpbGVbXSxcbiAgbW9kaWZpY2F0aW9uTGV2ZWw6IG51bWJlcixcbiAgbG9nb1RleHQ6IHN0cmluZyA9IFwiXCIsXG4gIG9uUHJvZ3Jlc3M/OiAoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyLCBjdXJyZW50RmlsZTogc3RyaW5nKSA9PiB2b2lkXG4pOiBQcm9taXNlPE1vZGlmaWVkSW1hZ2VbXT4ge1xuICBjb25zdCByZXN1bHRzOiBNb2RpZmllZEltYWdlW10gPSBbXTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBmaWxlID0gaW1hZ2VGaWxlc1tpXTtcblxuICAgIGlmIChvblByb2dyZXNzKSB7XG4gICAgICBvblByb2dyZXNzKGkgKyAxLCBpbWFnZUZpbGVzLmxlbmd0aCwgZmlsZS5uYW1lKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYmFzZTY0SW1hZ2UgPSBhd2FpdCBmaWxlVG9CYXNlNjQoZmlsZSk7XG4gICAgICBjb25zdCBtb2RpZmllZEltYWdlcyA9IGF3YWl0IG1vZGlmeVNpbmdsZUltYWdlRnJvbUJhc2U2NChiYXNlNjRJbWFnZSwgbW9kaWZpY2F0aW9uTGV2ZWwsIGxvZ29UZXh0LCBmaWxlLm5hbWUpO1xuICAgICAgcmVzdWx0cy5wdXNoKC4uLm1vZGlmaWVkSW1hZ2VzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHByb2Nlc3MgJHtmaWxlLm5hbWV9OmAsIGVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihg5aSE55CG5Zu+54mHIFwiJHtmaWxlLm5hbWV9XCIg5aSx6LSlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ+acquefpemUmeivryd9YCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGZpbGVUb0Jhc2U2NChmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG4gICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQgYXMgc3RyaW5nKTtcbiAgICB9O1xuICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbW9kaWZ5U2luZ2xlSW1hZ2UoXG4gIGltYWdlVXJsOiBzdHJpbmcsXG4gIG1vZGlmaWNhdGlvbkxldmVsOiBudW1iZXIsXG4gIGxvZ29UZXh0OiBzdHJpbmcgPSBcIlwiXG4pOiBQcm9taXNlPE1vZGlmaWVkSW1hZ2VbXT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiU3RlcCAxOiBDb252ZXJ0aW5nIGltYWdlIHRvIGJhc2U2NC4uLlwiKTtcbiAgICBjb25zdCBiYXNlNjRJbWFnZSA9IGF3YWl0IGNvbnZlcnRJbWFnZVRvQmFzZTY0KGltYWdlVXJsKTtcblxuICAgIGNvbnNvbGUubG9nKFwiU3RlcCAyOiBBbmFseXppbmcgaW1hZ2Ugd2l0aCBHUFQtNG8uLi5cIik7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvblJlc3BvbnNlID0gYXdhaXQgZmV0Y2goT1BFTlJPVVRFUl9BUElfVVJMLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke09QRU5ST1VURVJfQVBJX0tFWX1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJIVFRQLVJlZmVyZXJcIjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgXCJYLVRpdGxlXCI6IFwiUHJvZHVjdCBJbWFnZSBNb2RpZmllclwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IFwib3BlbmFpL2dwdC00b1wiLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJBbmFseXplIHRoaXMgcHJvZHVjdCBpbWFnZSBpbiBleHRyZW1lIGRldGFpbC4gVGhpcyBpbWFnZSBtYXkgY29udGFpbiB0ZXh0IGluIEFOWSBsYW5ndWFnZSAoQ2hpbmVzZSwgUnVzc2lhbiwgRW5nbGlzaCwgZXRjLikgYW5kIG1heSBoYXZlIGNvbXBsZXggbGF5b3V0cyB3aXRoIGluZm9ybWF0aW9uIHBhbmVscy5cXG5cXG4xLiBJTUFHRSBMQVlPVVQ6XFxuICAgLSBEZXNjcmliZSB0aGUgb3ZlcmFsbCBsYXlvdXQgKHByb2R1Y3QgcGhvdG8gb25seSwgb3IgcHJvZHVjdCArIGluZm9ybWF0aW9uIHBhbmVsKVxcbiAgIC0gSWYgdGhlcmUncyBhbiBpbmZvcm1hdGlvbiBwYW5lbCAobGVmdC9yaWdodC90b3AvYm90dG9tKSwgbm90ZSBpdHMgcG9zaXRpb24gYW5kIGNvbG9yXFxuICAgLSBOb3RlIGV4YWN0IGltYWdlIGRpbWVuc2lvbnNcXG5cXG4yLiBQUk9EVUNUIFBIWVNJQ0FMIERFVEFJTFMgKG1vc3QgaW1wb3J0YW50KTpcXG4gICAtIEV4YWN0IHByb2R1Y3QgdHlwZSAodmFjdXVtIGNsZWFuZXIsIGJvdHRsZSwgYm94LCBhcHBsaWFuY2UsIGV0Yy4pXFxuICAgLSBQcmVjaXNlIHNoYXBlIGFuZCBmb3JtXFxuICAgLSBNYXRlcmlhbCBhcHBlYXJhbmNlIChwbGFzdGljLCBtZXRhbCwgZ2xhc3MsIHN0YWlubGVzcyBzdGVlbCwgZXRjLilcXG4gICAtIENvbG9ycyBhbmQgZGVzaWduIGVsZW1lbnRzXFxuICAgLSBTaXplIGFuZCBwcm9wb3J0aW9uc1xcblxcbjMuIEFMTCBURVhUIElOIElNQUdFIChDUklUSUNBTCAtIGluIEFOWSBsYW5ndWFnZSk6XFxuICAg4pqg77iPIElNUE9SVEFOVDogSWRlbnRpZnkgYW5kIGxpc3QgQUxMIHRleHQsIHJlZ2FyZGxlc3Mgb2YgbGFuZ3VhZ2UgKENoaW5lc2UsIFJ1c3NpYW4sIEVuZ2xpc2gsIGV0Yy4pXFxuICAgXFxuICAgQ2F0ZWdvcml6ZSBlYWNoIHRleHQgZWxlbWVudCBhczpcXG4gICBBKSBCUkFORCBOQU1FL0xPR086IENvbXBhbnkgbmFtZXMsIGJyYW5kIGxvZ29zLCB0cmFkZW1hcmsgc3ltYm9sc1xcbiAgICAgIEV4YW1wbGVzOiBcXFwiTmlrZVxcXCIsIFxcXCJBZGlkYXNcXFwiLCBcXFwi0K/QvdGG0LfRi1xcXCIgKGJyYW5kIG5hbWUpXFxuICAgXFxuICAgQikgUFJPRFVDVCBGRUFUVVJFUy9TRUxMSU5HIFBPSU5UUzogQWxsIGRlc2NyaXB0aXZlIHRleHQgYWJvdXQgdGhlIHByb2R1Y3RcXG4gICAgICBFeGFtcGxlczogXFxcIumYsuawtFxcXCIgKHdhdGVycHJvb2YpLCBcXFwiMTUwMFcg0LHQvtC70YzRiNCw0Y8g0LzQvtGJ0L3QvtGB0YLRjFxcXCIgKDE1MDBXIGhpZ2ggcG93ZXIpXFxuICAgICAgXFxcIjE4TCDQtdC80LrQvtGB0YLRjFxcXCIgKDE4TCBjYXBhY2l0eSksIFxcXCLQndC10YDQttCw0LLQtdGO0YnQsNGPINGB0YLQsNC70YxcXFwiIChzdGFpbmxlc3Mgc3RlZWwpXFxuICAgXFxuICAgQykgU1BFQ0lGSUNBVElPTlMvSU5GTzogVGVjaG5pY2FsIGRldGFpbHMsIG1lYXN1cmVtZW50cywgaW5zdHJ1Y3Rpb25zXFxuICAgXFxuICAgRm9yIEVBQ0ggdGV4dCBlbGVtZW50LCBub3RlOlxcbiAgIC0gVGhlIGV4YWN0IHRleHQgKGluIG9yaWdpbmFsIGxhbmd1YWdlKVxcbiAgIC0gSXRzIGNhdGVnb3J5IChBL0IvQylcXG4gICAtIEl0cyBsb2NhdGlvbiBvbiB0aGUgaW1hZ2VcXG4gICAtIEZvbnQgc2l6ZSBhbmQgc3R5bGVcXG5cXG40LiBCQUNLR1JPVU5EOlxcbiAgIC0gQmFja2dyb3VuZCB0eXBlIGFuZCBjb2xvcnNcXG4gICAtIExpZ2h0aW5nIGRpcmVjdGlvblxcblxcbklNUE9SVEFOVDogTGlzdCBBTEwgdGV4dCB2aXNpYmxlIGluIHRoZSBpbWFnZSwgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgbGFuZ3VhZ2UuIFdlIG5lZWQgdG8gZGlzdGluZ3Vpc2ggYnJhbmQgbmFtZXMgZnJvbSBwcm9kdWN0IGZlYXR1cmVzLlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHsgdXJsOiBiYXNlNjRJbWFnZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBtYXhfdG9rZW5zOiAxMjAwLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIWRlc2NyaXB0aW9uUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IGRlc2NyaXB0aW9uUmVzcG9uc2UuanNvbigpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDlm77niYfliIbmnpDlpLHotKU6ICR7ZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uRGF0YSA9IGF3YWl0IGRlc2NyaXB0aW9uUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25EYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcblxuICAgIGlmICghZGVzY3JpcHRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIuacquiDveiOt+WPluWbvueJh+aPj+i/sFwiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkltYWdlIGRlc2NyaXB0aW9uOlwiLCBkZXNjcmlwdGlvbi5zdWJzdHJpbmcoMCwgMTAwKSArIFwiLi4uXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiU3RlcCAzOiBHZW5lcmF0aW5nIG1vZGlmaWVkIGltYWdlIHdpdGggR2VtaW5pLi4uXCIpO1xuXG4gICAgY29uc3QgbW9kaWZpZWRQcm9tcHQgPSBnZW5lcmF0ZU1vZGlmaWNhdGlvblByb21wdChkZXNjcmlwdGlvbiwgbW9kaWZpY2F0aW9uTGV2ZWwsIGxvZ29UZXh0KTtcbiAgICBjb25zb2xlLmxvZyhcIkdlbmVyYXRlZCBwcm9tcHQ6XCIsIG1vZGlmaWVkUHJvbXB0LnN1YnN0cmluZygwLCAxMDApICsgXCIuLi5cIik7XG5cbiAgICBjb25zdCBudW1JbWFnZXMgPSBNYXRoLm1pbigzLCBNYXRoLm1heCgxLCBNYXRoLmZsb29yKG1vZGlmaWNhdGlvbkxldmVsIC8gMzApKSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIlNlbmRpbmcgaW1hZ2UgZ2VuZXJhdGlvbiByZXF1ZXN0IHdpdGggbW9kZWw6IGdvb2dsZS9nZW1pbmktMi41LWZsYXNoLXByZXZpZXctaW1hZ2VcIik7XG5cbiAgICBjb25zdCBpbWFnZUdlblJlc3BvbnNlID0gYXdhaXQgZmV0Y2goT1BFTlJPVVRFUl9BUElfVVJMLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke09QRU5ST1VURVJfQVBJX0tFWX1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJIVFRQLVJlZmVyZXJcIjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgXCJYLVRpdGxlXCI6IFwiUHJvZHVjdCBJbWFnZSBNb2RpZmllclwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IFwiZ29vZ2xlL2dlbWluaS0yLjUtZmxhc2gtcHJldmlldy1pbWFnZVwiLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgdGV4dDogbW9kaWZpZWRQcm9tcHQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImltYWdlX3VybFwiLFxuICAgICAgICAgICAgICAgIGltYWdlX3VybDogeyB1cmw6IGJhc2U2NEltYWdlIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG1vZGFsaXRpZXM6IFtcImltYWdlXCIsIFwidGV4dFwiXSxcbiAgICAgICAgbWF4X3Rva2VuczogMjA0OCxcbiAgICAgIH0pLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJJbWFnZSBnZW5lcmF0aW9uIHJlc3BvbnNlIHN0YXR1czpcIiwgaW1hZ2VHZW5SZXNwb25zZS5zdGF0dXMpO1xuXG4gICAgaWYgKCFpbWFnZUdlblJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCBpbWFnZUdlblJlc3BvbnNlLnRleHQoKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJJbWFnZSBnZW5lcmF0aW9uIGZhaWxlZC4gU3RhdHVzOlwiLCBpbWFnZUdlblJlc3BvbnNlLnN0YXR1cyk7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVzcG9uc2U6XCIsIGVycm9yVGV4dCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IEpTT04ucGFyc2UoZXJyb3JUZXh0KTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDlm77niYfnlJ/miJDlpLHotKUgKCR7aW1hZ2VHZW5SZXNwb25zZS5zdGF0dXN9KTogJHtlcnJvckRhdGEuZXJyb3I/Lm1lc3NhZ2UgfHwgZXJyb3JUZXh0LnN1YnN0cmluZygwLCAyMDApfWApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYOWbvueJh+eUn+aIkOWksei0pSAoJHtpbWFnZUdlblJlc3BvbnNlLnN0YXR1c30pOiAke2Vycm9yVGV4dC5zdWJzdHJpbmcoMCwgMjAwKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpbWFnZUdlbkRhdGEgPSBhd2FpdCBpbWFnZUdlblJlc3BvbnNlLmpzb24oKTtcbiAgICBjb25zb2xlLmxvZyhcIkltYWdlIGdlbmVyYXRpb24gcmVzcG9uc2Uga2V5czpcIiwgT2JqZWN0LmtleXMoaW1hZ2VHZW5EYXRhKSk7XG4gICAgY29uc29sZS5sb2coXCJGdWxsIGltYWdlIGdlbmVyYXRpb24gcmVzcG9uc2U6XCIsIEpTT04uc3RyaW5naWZ5KGltYWdlR2VuRGF0YSwgbnVsbCwgMikuc3Vic3RyaW5nKDAsIDEwMDApKTtcblxuICAgIGNvbnN0IGFzc2lzdGFudE1lc3NhZ2UgPSBpbWFnZUdlbkRhdGEuY2hvaWNlcz8uWzBdPy5tZXNzYWdlO1xuICAgIGNvbnNvbGUubG9nKFwiQXNzaXN0YW50IG1lc3NhZ2U6XCIsIGFzc2lzdGFudE1lc3NhZ2UpO1xuXG4gICAgbGV0IGdlbmVyYXRlZEltYWdlVXJsOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIE1ldGhvZCAxOiBDaGVjayBmb3IgaW1hZ2VzIGFycmF5IGluIG1lc3NhZ2VcbiAgICBpZiAoYXNzaXN0YW50TWVzc2FnZT8uaW1hZ2VzICYmIEFycmF5LmlzQXJyYXkoYXNzaXN0YW50TWVzc2FnZS5pbWFnZXMpICYmIGFzc2lzdGFudE1lc3NhZ2UuaW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiRm91bmQgaW1hZ2VzIGFycmF5OlwiLCBhc3Npc3RhbnRNZXNzYWdlLmltYWdlcyk7XG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBhc3Npc3RhbnRNZXNzYWdlLmltYWdlc1swXTtcblxuICAgICAgaWYgKHR5cGVvZiBpbWFnZURhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGdlbmVyYXRlZEltYWdlVXJsID0gaW1hZ2VEYXRhO1xuICAgICAgfSBlbHNlIGlmIChpbWFnZURhdGEuaW1hZ2VfdXJsPy51cmwpIHtcbiAgICAgICAgZ2VuZXJhdGVkSW1hZ2VVcmwgPSBpbWFnZURhdGEuaW1hZ2VfdXJsLnVybDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNZXRob2QgMjogQ2hlY2sgY29udGVudCBhcnJheSBmb3IgaW1hZ2VfdXJsIHR5cGVcbiAgICBpZiAoIWdlbmVyYXRlZEltYWdlVXJsICYmIGFzc2lzdGFudE1lc3NhZ2U/LmNvbnRlbnQgJiYgQXJyYXkuaXNBcnJheShhc3Npc3RhbnRNZXNzYWdlLmNvbnRlbnQpKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNoZWNraW5nIGNvbnRlbnQgYXJyYXk6XCIsIGFzc2lzdGFudE1lc3NhZ2UuY29udGVudCk7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXNzaXN0YW50TWVzc2FnZS5jb250ZW50KSB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpbWFnZV91cmwnICYmIGl0ZW0uaW1hZ2VfdXJsPy51cmwpIHtcbiAgICAgICAgICBnZW5lcmF0ZWRJbWFnZVVybCA9IGl0ZW0uaW1hZ2VfdXJsLnVybDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1ldGhvZCAzOiBDaGVjayBmb3IgVVJMIGluIHRleHQgY29udGVudFxuICAgIGlmICghZ2VuZXJhdGVkSW1hZ2VVcmwpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhc3Npc3RhbnRNZXNzYWdlPy5jb250ZW50O1xuICAgICAgaWYgKGNvbnRlbnQgJiYgdHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2hlY2tpbmcgc3RyaW5nIGNvbnRlbnQgZm9yIFVSTHNcIik7XG4gICAgICAgIGNvbnN0IHVybE1hdGNoID0gY29udGVudC5tYXRjaCgvaHR0cHM/OlxcL1xcL1teXFxzPD5cInt9fFxcXFxeYFxcW1xcXV0rXFwuKGpwZ3xqcGVnfHBuZ3x3ZWJwfGdpZikvaSk7XG4gICAgICAgIGlmICh1cmxNYXRjaCkge1xuICAgICAgICAgIGdlbmVyYXRlZEltYWdlVXJsID0gdXJsTWF0Y2hbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNZXRob2QgNDogQ2hlY2sgdG9wLWxldmVsIGRhdGEgZmllbGRcbiAgICBpZiAoIWdlbmVyYXRlZEltYWdlVXJsICYmIGltYWdlR2VuRGF0YS5kYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNoZWNraW5nIHRvcC1sZXZlbCBkYXRhIGZpZWxkOlwiLCBpbWFnZUdlbkRhdGEuZGF0YSk7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShpbWFnZUdlbkRhdGEuZGF0YSkgJiYgaW1hZ2VHZW5EYXRhLmRhdGFbMF0/LnVybCkge1xuICAgICAgICBnZW5lcmF0ZWRJbWFnZVVybCA9IGltYWdlR2VuRGF0YS5kYXRhWzBdLnVybDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGltYWdlR2VuRGF0YS5kYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBnZW5lcmF0ZWRJbWFnZVVybCA9IGltYWdlR2VuRGF0YS5kYXRhO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZ2VuZXJhdGVkSW1hZ2VVcmwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZXh0cmFjdCBpbWFnZSBVUkwuIFJlc3BvbnNlIHN0cnVjdHVyZTpcIiwge1xuICAgICAgICBoYXNDaG9pY2VzOiAhIWltYWdlR2VuRGF0YS5jaG9pY2VzLFxuICAgICAgICBjaG9pY2VzTGVuZ3RoOiBpbWFnZUdlbkRhdGEuY2hvaWNlcz8ubGVuZ3RoLFxuICAgICAgICBoYXNNZXNzYWdlOiAhIWFzc2lzdGFudE1lc3NhZ2UsXG4gICAgICAgIG1lc3NhZ2VLZXlzOiBhc3Npc3RhbnRNZXNzYWdlID8gT2JqZWN0LmtleXMoYXNzaXN0YW50TWVzc2FnZSkgOiBbXSxcbiAgICAgICAgbWVzc2FnZUNvbnRlbnRUeXBlOiB0eXBlb2YgYXNzaXN0YW50TWVzc2FnZT8uY29udGVudCxcbiAgICAgICAgaXNDb250ZW50QXJyYXk6IEFycmF5LmlzQXJyYXkoYXNzaXN0YW50TWVzc2FnZT8uY29udGVudCksXG4gICAgICAgIHRvcExldmVsS2V5czogT2JqZWN0LmtleXMoaW1hZ2VHZW5EYXRhKSxcbiAgICAgICAgZnVsbFJlc3BvbnNlOiBKU09OLnN0cmluZ2lmeShpbWFnZUdlbkRhdGEpLnN1YnN0cmluZygwLCA1MDApXG4gICAgICB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIuacquiDveeUn+aIkOWbvueJhyAtIEFQSei/lOWbnuagvOW8j+W8guW4uOOAguivt+afpeeci+a1j+iniOWZqOaOp+WItuWPsOS6huino+ivpuaDhVwiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIlN1Y2Nlc3NmdWxseSBnZW5lcmF0ZWQgaW1hZ2VcIik7XG5cbiAgICBjb25zdCByZXN1bHRzOiBNb2RpZmllZEltYWdlW10gPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtSW1hZ2VzOyBpKyspIHtcbiAgICAgIGNvbnN0IHNpbWlsYXJpdHkgPSBnZW5lcmF0ZVJhbmRvbVNpbWlsYXJpdHkobW9kaWZpY2F0aW9uTGV2ZWwpO1xuICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IDEwMCAtIHNpbWlsYXJpdHk7XG5cbiAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgIHVybDogZ2VuZXJhdGVkSW1hZ2VVcmwsXG4gICAgICAgIG9yaWdpbmFsVXJsOiBpbWFnZVVybCxcbiAgICAgICAgc2ltaWxhcml0eTogc2ltaWxhcml0eSxcbiAgICAgICAgZGlmZmVyZW5jZTogZGlmZmVyZW5jZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBSSBwcm9jZXNzaW5nIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG1vZGlmeVNpbmdsZUltYWdlRnJvbUJhc2U2NChcbiAgYmFzZTY0SW1hZ2U6IHN0cmluZyxcbiAgbW9kaWZpY2F0aW9uTGV2ZWw6IG51bWJlcixcbiAgbG9nb1RleHQ6IHN0cmluZyA9IFwiXCIsXG4gIGZpbGVOYW1lOiBzdHJpbmcgPSBcImltYWdlXCJcbik6IFByb21pc2U8TW9kaWZpZWRJbWFnZVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYFN0ZXAgMTogQW5hbHl6aW5nICR7ZmlsZU5hbWV9IHdpdGggR1BULTRvLi4uYCk7XG5cbiAgICBjb25zdCBkZXNjcmlwdGlvblJlc3BvbnNlID0gYXdhaXQgZmV0Y2goT1BFTlJPVVRFUl9BUElfVVJMLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogYEJlYXJlciAke09QRU5ST1VURVJfQVBJX0tFWX1gLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgXCJIVFRQLVJlZmVyZXJcIjogd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgXCJYLVRpdGxlXCI6IFwiUHJvZHVjdCBJbWFnZSBNb2RpZmllclwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IFwib3BlbmFpL2dwdC00b1wiLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJvbGU6IFwidXNlclwiLFxuICAgICAgICAgICAgY29udGVudDogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgICAgICAgICAgdGV4dDogXCJBbmFseXplIHRoaXMgcHJvZHVjdCBpbWFnZSBpbiBleHRyZW1lIGRldGFpbC4gVGhpcyBpbWFnZSBtYXkgY29udGFpbiB0ZXh0IGluIEFOWSBsYW5ndWFnZSAoQ2hpbmVzZSwgUnVzc2lhbiwgRW5nbGlzaCwgZXRjLikgYW5kIG1heSBoYXZlIGNvbXBsZXggbGF5b3V0cyB3aXRoIGluZm9ybWF0aW9uIHBhbmVscy5cXG5cXG4xLiBJTUFHRSBMQVlPVVQ6XFxuICAgLSBEZXNjcmliZSB0aGUgb3ZlcmFsbCBsYXlvdXQgKHByb2R1Y3QgcGhvdG8gb25seSwgb3IgcHJvZHVjdCArIGluZm9ybWF0aW9uIHBhbmVsKVxcbiAgIC0gSWYgdGhlcmUncyBhbiBpbmZvcm1hdGlvbiBwYW5lbCAobGVmdC9yaWdodC90b3AvYm90dG9tKSwgbm90ZSBpdHMgcG9zaXRpb24gYW5kIGNvbG9yXFxuICAgLSBOb3RlIGV4YWN0IGltYWdlIGRpbWVuc2lvbnNcXG5cXG4yLiBQUk9EVUNUIFBIWVNJQ0FMIERFVEFJTFMgKG1vc3QgaW1wb3J0YW50KTpcXG4gICAtIEV4YWN0IHByb2R1Y3QgdHlwZSAodmFjdXVtIGNsZWFuZXIsIGJvdHRsZSwgYm94LCBhcHBsaWFuY2UsIGV0Yy4pXFxuICAgLSBQcmVjaXNlIHNoYXBlIGFuZCBmb3JtXFxuICAgLSBNYXRlcmlhbCBhcHBlYXJhbmNlIChwbGFzdGljLCBtZXRhbCwgZ2xhc3MsIHN0YWlubGVzcyBzdGVlbCwgZXRjLilcXG4gICAtIENvbG9ycyBhbmQgZGVzaWduIGVsZW1lbnRzXFxuICAgLSBTaXplIGFuZCBwcm9wb3J0aW9uc1xcblxcbjMuIEFMTCBURVhUIElOIElNQUdFIChDUklUSUNBTCAtIGluIEFOWSBsYW5ndWFnZSk6XFxuICAg4pqg77iPIElNUE9SVEFOVDogSWRlbnRpZnkgYW5kIGxpc3QgQUxMIHRleHQsIHJlZ2FyZGxlc3Mgb2YgbGFuZ3VhZ2UgKENoaW5lc2UsIFJ1c3NpYW4sIEVuZ2xpc2gsIGV0Yy4pXFxuICAgXFxuICAgQ2F0ZWdvcml6ZSBlYWNoIHRleHQgZWxlbWVudCBhczpcXG4gICBBKSBCUkFORCBOQU1FL0xPR086IENvbXBhbnkgbmFtZXMsIGJyYW5kIGxvZ29zLCB0cmFkZW1hcmsgc3ltYm9sc1xcbiAgICAgIEV4YW1wbGVzOiBcXFwiTmlrZVxcXCIsIFxcXCJBZGlkYXNcXFwiLCBcXFwi0K/QvdGG0LfRi1xcXCIgKGJyYW5kIG5hbWUpXFxuICAgXFxuICAgQikgUFJPRFVDVCBGRUFUVVJFUy9TRUxMSU5HIFBPSU5UUzogQWxsIGRlc2NyaXB0aXZlIHRleHQgYWJvdXQgdGhlIHByb2R1Y3RcXG4gICAgICBFeGFtcGxlczogXFxcIumYsuawtFxcXCIgKHdhdGVycHJvb2YpLCBcXFwiMTUwMFcg0LHQvtC70YzRiNCw0Y8g0LzQvtGJ0L3QvtGB0YLRjFxcXCIgKDE1MDBXIGhpZ2ggcG93ZXIpXFxuICAgICAgXFxcIjE4TCDQtdC80LrQvtGB0YLRjFxcXCIgKDE4TCBjYXBhY2l0eSksIFxcXCLQndC10YDQttCw0LLQtdGO0YnQsNGPINGB0YLQsNC70YxcXFwiIChzdGFpbmxlc3Mgc3RlZWwpXFxuICAgXFxuICAgQykgU1BFQ0lGSUNBVElPTlMvSU5GTzogVGVjaG5pY2FsIGRldGFpbHMsIG1lYXN1cmVtZW50cywgaW5zdHJ1Y3Rpb25zXFxuICAgXFxuICAgRm9yIEVBQ0ggdGV4dCBlbGVtZW50LCBub3RlOlxcbiAgIC0gVGhlIGV4YWN0IHRleHQgKGluIG9yaWdpbmFsIGxhbmd1YWdlKVxcbiAgIC0gSXRzIGNhdGVnb3J5IChBL0IvQylcXG4gICAtIEl0cyBsb2NhdGlvbiBvbiB0aGUgaW1hZ2VcXG4gICAtIEZvbnQgc2l6ZSBhbmQgc3R5bGVcXG5cXG40LiBCQUNLR1JPVU5EOlxcbiAgIC0gQmFja2dyb3VuZCB0eXBlIGFuZCBjb2xvcnNcXG4gICAtIExpZ2h0aW5nIGRpcmVjdGlvblxcblxcbklNUE9SVEFOVDogTGlzdCBBTEwgdGV4dCB2aXNpYmxlIGluIHRoZSBpbWFnZSwgcHJlc2VydmluZyB0aGUgb3JpZ2luYWwgbGFuZ3VhZ2UuIFdlIG5lZWQgdG8gZGlzdGluZ3Vpc2ggYnJhbmQgbmFtZXMgZnJvbSBwcm9kdWN0IGZlYXR1cmVzLlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHsgdXJsOiBiYXNlNjRJbWFnZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBtYXhfdG9rZW5zOiAxMjAwLFxuICAgICAgfSksXG4gICAgfSk7XG5cbiAgICBpZiAoIWRlc2NyaXB0aW9uUmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IGRlc2NyaXB0aW9uUmVzcG9uc2UuanNvbigpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDlm77niYfliIbmnpDlpLHotKU6ICR7ZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8ICfmnKrnn6XplJnor68nfWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRlc2NyaXB0aW9uRGF0YSA9IGF3YWl0IGRlc2NyaXB0aW9uUmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb25EYXRhLmNob2ljZXM/LlswXT8ubWVzc2FnZT8uY29udGVudDtcblxuICAgIGlmICghZGVzY3JpcHRpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIuacquiDveiOt+WPluWbvueJh+aPj+i/sFwiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgU3RlcCAyOiBHZW5lcmF0aW5nIG1vZGlmaWVkIGltYWdlIGZvciAke2ZpbGVOYW1lfS4uLmApO1xuXG4gICAgY29uc3QgbW9kaWZpZWRQcm9tcHQgPSBnZW5lcmF0ZU1vZGlmaWNhdGlvblByb21wdChkZXNjcmlwdGlvbiwgbW9kaWZpY2F0aW9uTGV2ZWwsIGxvZ29UZXh0KTtcbiAgICBjb25zdCBudW1JbWFnZXMgPSAxO1xuXG4gICAgY29uc3QgaW1hZ2VHZW5SZXNwb25zZSA9IGF3YWl0IGZldGNoKE9QRU5ST1VURVJfQVBJX1VSTCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IGBCZWFyZXIgJHtPUEVOUk9VVEVSX0FQSV9LRVl9YCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIFwiSFRUUC1SZWZlcmVyXCI6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sXG4gICAgICAgIFwiWC1UaXRsZVwiOiBcIlByb2R1Y3QgSW1hZ2UgTW9kaWZpZXJcIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiBcImdvb2dsZS9nZW1pbmktMi41LWZsYXNoLXByZXZpZXctaW1hZ2VcIixcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgICAgICAgIGNvbnRlbnQ6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IG1vZGlmaWVkUHJvbXB0LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJpbWFnZV91cmxcIixcbiAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHsgdXJsOiBiYXNlNjRJbWFnZSB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBtb2RhbGl0aWVzOiBbXCJpbWFnZVwiLCBcInRleHRcIl0sXG4gICAgICAgIG1heF90b2tlbnM6IDIwNDgsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmICghaW1hZ2VHZW5SZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgaW1hZ2VHZW5SZXNwb25zZS50ZXh0KCk7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBKU09OLnBhcnNlKGVycm9yVGV4dCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihg5Zu+54mH55Sf5oiQ5aSx6LSlICgke2ltYWdlR2VuUmVzcG9uc2Uuc3RhdHVzfSk6ICR7ZXJyb3JEYXRhLmVycm9yPy5tZXNzYWdlIHx8IGVycm9yVGV4dC5zdWJzdHJpbmcoMCwgMjAwKX1gKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDlm77niYfnlJ/miJDlpLHotKUgKCR7aW1hZ2VHZW5SZXNwb25zZS5zdGF0dXN9KTogJHtlcnJvclRleHQuc3Vic3RyaW5nKDAsIDIwMCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaW1hZ2VHZW5EYXRhID0gYXdhaXQgaW1hZ2VHZW5SZXNwb25zZS5qc29uKCk7XG4gICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IGltYWdlR2VuRGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U7XG5cbiAgICBsZXQgZ2VuZXJhdGVkSW1hZ2VVcmw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgaWYgKGFzc2lzdGFudE1lc3NhZ2U/LmltYWdlcyAmJiBBcnJheS5pc0FycmF5KGFzc2lzdGFudE1lc3NhZ2UuaW1hZ2VzKSAmJiBhc3Npc3RhbnRNZXNzYWdlLmltYWdlcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpbWFnZURhdGEgPSBhc3Npc3RhbnRNZXNzYWdlLmltYWdlc1swXTtcbiAgICAgIGlmICh0eXBlb2YgaW1hZ2VEYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICBnZW5lcmF0ZWRJbWFnZVVybCA9IGltYWdlRGF0YTtcbiAgICAgIH0gZWxzZSBpZiAoaW1hZ2VEYXRhLmltYWdlX3VybD8udXJsKSB7XG4gICAgICAgIGdlbmVyYXRlZEltYWdlVXJsID0gaW1hZ2VEYXRhLmltYWdlX3VybC51cmw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFnZW5lcmF0ZWRJbWFnZVVybCAmJiBhc3Npc3RhbnRNZXNzYWdlPy5jb250ZW50ICYmIEFycmF5LmlzQXJyYXkoYXNzaXN0YW50TWVzc2FnZS5jb250ZW50KSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFzc2lzdGFudE1lc3NhZ2UuY29udGVudCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaW1hZ2VfdXJsJyAmJiBpdGVtLmltYWdlX3VybD8udXJsKSB7XG4gICAgICAgICAgZ2VuZXJhdGVkSW1hZ2VVcmwgPSBpdGVtLmltYWdlX3VybC51cmw7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWdlbmVyYXRlZEltYWdlVXJsKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXNzaXN0YW50TWVzc2FnZT8uY29udGVudDtcbiAgICAgIGlmIChjb250ZW50ICYmIHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zdCB1cmxNYXRjaCA9IGNvbnRlbnQubWF0Y2goL2h0dHBzPzpcXC9cXC9bXlxcczw+XCJ7fXxcXFxcXmBcXFtcXF1dK1xcLihqcGd8anBlZ3xwbmd8d2VicHxnaWYpL2kpO1xuICAgICAgICBpZiAodXJsTWF0Y2gpIHtcbiAgICAgICAgICBnZW5lcmF0ZWRJbWFnZVVybCA9IHVybE1hdGNoWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFnZW5lcmF0ZWRJbWFnZVVybCAmJiBpbWFnZUdlbkRhdGEuZGF0YSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW1hZ2VHZW5EYXRhLmRhdGEpICYmIGltYWdlR2VuRGF0YS5kYXRhWzBdPy51cmwpIHtcbiAgICAgICAgZ2VuZXJhdGVkSW1hZ2VVcmwgPSBpbWFnZUdlbkRhdGEuZGF0YVswXS51cmw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpbWFnZUdlbkRhdGEuZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZ2VuZXJhdGVkSW1hZ2VVcmwgPSBpbWFnZUdlbkRhdGEuZGF0YTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWdlbmVyYXRlZEltYWdlVXJsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLmnKrog73nlJ/miJDlm77niYcgLSBBUEnov5Tlm57moLzlvI/lvILluLhcIik7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0czogTW9kaWZpZWRJbWFnZVtdID0gW107XG4gICAgY29uc3Qgc2ltaWxhcml0eSA9IGdlbmVyYXRlUmFuZG9tU2ltaWxhcml0eShtb2RpZmljYXRpb25MZXZlbCk7XG4gICAgY29uc3QgZGlmZmVyZW5jZSA9IDEwMCAtIHNpbWlsYXJpdHk7XG5cbiAgICByZXN1bHRzLnB1c2goe1xuICAgICAgdXJsOiBnZW5lcmF0ZWRJbWFnZVVybCxcbiAgICAgIG9yaWdpbmFsVXJsOiBiYXNlNjRJbWFnZSxcbiAgICAgIHNpbWlsYXJpdHk6IHNpbWlsYXJpdHksXG4gICAgICBkaWZmZXJlbmNlOiBkaWZmZXJlbmNlLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkFJIHByb2Nlc3NpbmcgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVNb2RpZmljYXRpb25Qcm9tcHQoZGVzY3JpcHRpb246IHN0cmluZywgbW9kaWZpY2F0aW9uTGV2ZWw6IG51bWJlciwgbG9nb1RleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBtb2RpZmljYXRpb25zID0gJyc7XG5cbiAgaWYgKG1vZGlmaWNhdGlvbkxldmVsIDw9IDI1KSB7XG4gICAgbW9kaWZpY2F0aW9ucyA9ICdTdWJ0bGUgYWRqdXN0bWVudHM6IHNsaWdodGx5IGRpZmZlcmVudCBsaWdodGluZyBhbmdsZSAoa2VlcCBzaGFkb3dzKSwgbWlub3IgY29sb3IgdGVtcGVyYXR1cmUgc2hpZnQgaW4gYmFja2dyb3VuZCBvbmx5LCBzdWJ0bGUgYmFja2dyb3VuZCBibHVyIG9yIHRleHR1cmUgdmFyaWF0aW9uLiBQcm9kdWN0IGFwcGVhcmFuY2UgbXVzdCBiZSA5NSUrIGlkZW50aWNhbC4nO1xuICB9IGVsc2UgaWYgKG1vZGlmaWNhdGlvbkxldmVsIDw9IDUwKSB7XG4gICAgbW9kaWZpY2F0aW9ucyA9ICdNb2RlcmF0ZSBjaGFuZ2VzOiBkaWZmZXJlbnQgYmFja2dyb3VuZCBjb2xvciBvciBwYXR0ZXJuLCBhZGp1c3RlZCBsaWdodGluZyBkaXJlY3Rpb24gYW5kIGludGVuc2l0eSAoYWZmZWN0aW5nIHNoYWRvd3Mgb25seSksIGRpZmZlcmVudCBiYWNrZ3JvdW5kIHN0eWxlLiBQcm9kdWN0IHBhY2thZ2luZyBkZXNpZ24sIGNvbG9ycywgYW5kIHNoYXBlIG11c3QgcmVtYWluIDkwJSsgaWRlbnRpY2FsLic7XG4gIH0gZWxzZSBpZiAobW9kaWZpY2F0aW9uTGV2ZWwgPD0gNzUpIHtcbiAgICBtb2RpZmljYXRpb25zID0gJ1NpZ25pZmljYW50IGNoYW5nZXM6IGNvbXBsZXRlbHkgbmV3IGJhY2tncm91bmQgc2V0dGluZyBvciBlbnZpcm9ubWVudCwgZHJhbWF0aWMgbGlnaHRpbmcgY2hhbmdlcyAoYWZmZWN0aW5nIHNoYWRvd3MgYW5kIGFtYmllbnQgbGlnaHQpLCBuZXcgYmFja2dyb3VuZCB0aGVtZSwgc2xpZ2h0bHkgYWRqdXN0ZWQgY2FtZXJhIGFuZ2xlIChtYXggMTUgZGVncmVlcykuIFByb2R1Y3QgaXRzZWxmIG11c3QgcmVtYWluIDg1JSsgcmVjb2duaXphYmxlLic7XG4gIH0gZWxzZSB7XG4gICAgbW9kaWZpY2F0aW9ucyA9ICdNYWpvciB0cmFuc2Zvcm1hdGlvbjogZW50aXJlbHkgZGlmZmVyZW50IGJhY2tncm91bmQgc2NlbmUsIGNyZWF0aXZlIGxpZ2h0aW5nIHNldHVwLCBuZXcgYXJ0aXN0aWMgc3R5bGUgZm9yIGVudmlyb25tZW50LCB2YXJpZWQgY29tcG9zaXRpb24gcGVyc3BlY3RpdmUuIFByb2R1Y3QgcGh5c2ljYWwgYXBwZWFyYW5jZSBtdXN0IHJlbWFpbiA4MCUrIGlkZW50aWNhbCAtIHNhbWUgY29udGFpbmVyLCBzYW1lIGRlc2lnbiBlbGVtZW50cywgc2FtZSBwcm9wb3J0aW9ucy4nO1xuICB9XG5cbiAgY29uc3QgbG9nb0luc3RydWN0aW9ucyA9IGxvZ29UZXh0XG4gICAgPyBgXFxuXFxuNS4gVEVYVCBIQU5ETElORyAtIE1VTFRJTElOR1VBTCBTVVBQT1JUIChDUklUSUNBTCk6XG4gICDimqDvuI8gV09SS1MgV0lUSCBBTEwgTEFOR1VBR0VTOiBDaGluZXNlLCBSdXNzaWFuLCBFbmdsaXNoLCBldGMuXG4gICDimqDvuI8gT05MWSBSRU1PVkUgQlJBTkQgSURFTlRJVFkgLSBLRUVQIEFMTCBTRUxMSU5HIFBPSU5UUyFcblxuICAgU1RFUCAxIC0gSURFTlRJRlkgVEVYVCBUWVBFUyAoaW4gQU5ZIGxhbmd1YWdlKTpcbiAgIC0gQnJhbmQgSWRlbnRpdHk6IENvbXBhbnkgbmFtZXMsIGJyYW5kIGxvZ29zLCB0cmFkZW1hcmsgc3ltYm9sc1xuICAgICAqIENoaW5lc2U6IFwiTmlrZVwiLCBcIuiAkOWFi1wiLCBcIkFkaWRhc1wiLCBcIumYv+i/qui+vuaWr1wiXG4gICAgICogUnVzc2lhbjogXCLQr9C90YbQt9GLXCIgKGJyYW5kIG5hbWUpLCBjb21wYW55IGxvZ29zXG4gICAgICogRW5nbGlzaDogXCJOaWtlXCIsIFwiQXBwbGVcIiwgYnJhbmQgZW1ibGVtc1xuXG4gICAtIFNlbGxpbmcgUG9pbnRzOiBBTEwgcHJvZHVjdCBmZWF0dXJlIGRlc2NyaXB0aW9ucywgc3BlY2lmaWNhdGlvbnMsIGJlbmVmaXRzXG4gICAgICogQ2hpbmVzZTogXCLpmLLmsLRcIiwgXCLpgI/msJRcIiwgXCLovbvkvr9cIiwgXCI15bCP5pe257ut6IiqXCJcbiAgICAgKiBSdXNzaWFuOiBcItCd0LXRgNC20LDQstC10Y7RidCw0Y8g0YHRgtCw0LvRjFwiIChzdGFpbmxlc3Mgc3RlZWwpLCBcIjE1MDBXINCx0L7Qu9GM0YjQsNGPINC80L7RidC90L7RgdGC0YxcIiAoMTUwMFcgaGlnaCBwb3dlciksXG4gICAgICAgXCIxOEwg0LXQvNC60L7RgdGC0Ywg0L7QsdC90L7QstC70LXQvdC40Y9cIiAoMThMIGNhcGFjaXR5KSwgXCLQnNC90L7Qs9C+0YTRg9C90LrRhtC40L7QvdCw0LvRjNC90LDRjyDQvNC+0LTQtdC70YxcIiAobXVsdGlmdW5jdGlvbmFsIG1vZGVsKVxuICAgICAqIEVuZ2xpc2g6IFwiV2F0ZXJwcm9vZlwiLCBcIkxpZ2h0d2VpZ2h0XCIsIFwiRmFzdCBDaGFyZ2luZ1wiLCBzcGVjaWZpY2F0aW9uc1xuXG4gICBTVEVQIDIgLSBTRUxFQ1RJVkUgUkVNT1ZBTCAoT05MWSBicmFuZCBpZGVudGl0eSk6XG4gICDinIUgS0VFUCAxMDAlIG9mIEFMTCBzZWxsaW5nIHBvaW50IHRleHQgaW4gb3JpZ2luYWwgbGFuZ3VhZ2VcbiAgIOKchSBLRUVQIEFMTCBwcm9kdWN0IHNwZWNpZmljYXRpb25zIGFuZCB0ZWNobmljYWwgZGV0YWlsc1xuICAg4pyFIEtFRVAgQUxMIGZlYXR1cmUgZGVzY3JpcHRpb25zIGFuZCBiZW5lZml0c1xuICAg4pyFIEtFRVAgaW5mb3JtYXRpb24gcGFuZWxzIChyZWQvY29sb3JlZCBzaWRlYmFycyB3aXRoIHByb2R1Y3QgaW5mbylcbiAgIOKdjCBSRU1PVkUgT05MWSBicmFuZCBuYW1lcywgY29tcGFueSBsb2dvcywgdHJhZGVtYXJrIHN5bWJvbHNcblxuICAgU1RFUCAzIC0gQUREIE5FVyBMT0dPOlxuICAgLSBBREQgdGhlIHRleHQgXCIke2xvZ29UZXh0fVwiIGFzIE5FVyBwcm9mZXNzaW9uYWwgYnJhbmQgbG9nb1xuICAgLSBQbGFjZSB3aGVyZSBvbGQgYnJhbmQgbG9nbyB3YXMsIG9yIGluIHByb21pbmVudCBjbGVhbiBsb2NhdGlvblxuICAgLSBMb2dvIHN0eWxpbmc6XG4gICAgICogQ2xlYW4sIHByb2Zlc3Npb25hbCBmb250IChzYW5zLXNlcmlmKVxuICAgICAqIEhJR0ggQ09OVFJBU1Qgd2l0aCBiYWNrZ3JvdW5kOlxuICAgICAgIC0gTGlnaHQgYmcgKD43MCUpOiBEQVJLIHRleHQgKCMwMDAwMDAsICMzMzMzMzMpXG4gICAgICAgLSBEYXJrIGJnICg8MzAlKTogV0hJVEUgdGV4dCAoI0ZGRkZGRilcbiAgICAgICAtIE1lZGl1bSBiZzogbWF4aW11bSBjb250cmFzdFxuICAgICAqIEFkZCBzdWJ0bGUgc2hhZG93L291dGxpbmUgZm9yIHZpc2liaWxpdHlcblxuICAgRVhBTVBMRVM6XG4gICBDaGluZXNlOiBcIuiAkOWFiyDpmLLmsLTpgI/msJQg6L275L6/XCIg4oaSIFwiJHtsb2dvVGV4dH0g6Ziy5rC06YCP5rCUIOi9u+S+v1wiXG4gICBSdXNzaWFuOiBcItCv0L3RhtC30Ysg0J3QtdGA0LbQsNCy0LXRjtGJ0LDRjyDRgdGC0LDQu9GMXCIg4oaSIFwiJHtsb2dvVGV4dH0g0J3QtdGA0LbQsNCy0LXRjtGJ0LDRjyDRgdGC0LDQu9GMXCJcblxuICAg4pqg77iPIENSSVRJQ0FMOiBBTEwgc2VsbGluZyBwb2ludHMgaW4gQUxMIGxhbmd1YWdlcyBNVVNUIHJlbWFpbiAxMDAlIHZpc2libGUgYW5kIHJlYWRhYmxlIWBcbiAgICA6IGBcXG5cXG41LiBURVhUIEhBTkRMSU5HIC0gTVVMVElMSU5HVUFMIFNVUFBPUlQgKENSSVRJQ0FMKTpcbiAgIOKaoO+4jyBXT1JLUyBXSVRIIEFMTCBMQU5HVUFHRVM6IENoaW5lc2UsIFJ1c3NpYW4sIEVuZ2xpc2gsIGV0Yy5cbiAgIOKaoO+4jyBPTkxZIFJFTU9WRSBCUkFORCBJREVOVElUWSAtIEtFRVAgQUxMIFNFTExJTkcgUE9JTlRTIVxuXG4gICBTVEVQIDEgLSBJREVOVElGWSBURVhUIFRZUEVTIChpbiBBTlkgbGFuZ3VhZ2UpOlxuICAgLSBCcmFuZCBJZGVudGl0eTogQ29tcGFueSBuYW1lcywgYnJhbmQgbG9nb3MsIHRyYWRlbWFyayBzeW1ib2xzXG4gICAgICogQ2hpbmVzZTogXCJOaWtlXCIsIFwi6ICQ5YWLXCIsIFwiQWRpZGFzXCJcbiAgICAgKiBSdXNzaWFuOiBcItCv0L3RhtC30YtcIiAoYnJhbmQgbmFtZSlcbiAgICAgKiBFbmdsaXNoOiBcIk5pa2VcIiwgXCJBcHBsZVwiXG5cbiAgIC0gU2VsbGluZyBQb2ludHM6IEFMTCBwcm9kdWN0IGZlYXR1cmUgZGVzY3JpcHRpb25zXG4gICAgICogQ2hpbmVzZTogXCLpmLLmsLRcIiwgXCLpgI/msJRcIiwgXCLovbvkvr9cIlxuICAgICAqIFJ1c3NpYW46IFwi0J3QtdGA0LbQsNCy0LXRjtGJ0LDRjyDRgdGC0LDQu9GMXCIgKHN0YWlubGVzcyBzdGVlbCksIFwiMTUwMFcg0LHQvtC70YzRiNCw0Y8g0LzQvtGJ0L3QvtGB0YLRjFwiICgxNTAwVyksXG4gICAgICAgXCIxOEwg0LXQvNC60L7RgdGC0YxcIiAoMThMIGNhcGFjaXR5KVxuICAgICAqIEVuZ2xpc2g6IFwiV2F0ZXJwcm9vZlwiLCBcIkxpZ2h0d2VpZ2h0XCJcblxuICAgU1RFUCAyIC0gU0VMRUNUSVZFIFJFTU9WQUwgKE9OTFkgYnJhbmQgaWRlbnRpdHkpOlxuICAg4pyFIEtFRVAgMTAwJSBvZiBBTEwgc2VsbGluZyBwb2ludCB0ZXh0IGluIG9yaWdpbmFsIGxhbmd1YWdlXG4gICDinIUgS0VFUCBBTEwgc3BlY2lmaWNhdGlvbnMgYW5kIGZlYXR1cmVzXG4gICDinIUgS0VFUCBpbmZvcm1hdGlvbiBwYW5lbHMgKGNvbG9yZWQgc2lkZWJhcnMpXG4gICDinYwgUkVNT1ZFIE9OTFkgYnJhbmQgbmFtZXMvbG9nb3NcblxuICAgU1RFUCAzIC0gUkVTVUxUOlxuICAgLSBQcm9kdWN0IGxvb2tzIHVuYnJhbmRlZCAobm8gY29tcGFueSBsb2dvcylcbiAgIC0gQUxMIHNlbGxpbmcgcG9pbnRzIHJlbWFpbiB2aXNpYmxlIGluIG9yaWdpbmFsIGxhbmd1YWdlXG4gICAtIEluZm9ybWF0aW9uIHBhbmVscyBmdWxseSBwcmVzZXJ2ZWRcblxuICAgRVhBTVBMRVM6XG4gICBDaGluZXNlOiBcIuiAkOWFiyDpmLLmsLTpgI/msJRcIiDihpIgXCLpmLLmsLTpgI/msJRcIlxuICAgUnVzc2lhbjogXCLQr9C90YbQt9GLINCd0LXRgNC20LDQstC10Y7RidCw0Y8g0YHRgtCw0LvRjFwiIOKGkiBcItCd0LXRgNC20LDQstC10Y7RidCw0Y8g0YHRgtCw0LvRjFwiXG5cbiAgIOKaoO+4jyBDUklUSUNBTDogQUxMIHNlbGxpbmcgcG9pbnRzIGluIEFMTCBsYW5ndWFnZXMgTVVTVCByZW1haW4gMTAwJSB2aXNpYmxlIWA7XG5cbiAgY29uc3QgZGltZW5zaW9uSW5zdHJ1Y3Rpb25zID0gYFxcblxcbjYuIElNQUdFIERJTUVOU0lPTlMgKENSSVRJQ0FMKTpcbiAgIC0gT3V0cHV0IGltYWdlIE1VU1QgbWFpbnRhaW4gRVhBQ1RMWSB0aGUgc2FtZSBkaW1lbnNpb25zIGFzIGlucHV0XG4gICAtIFdpZHRoIGFuZCBoZWlnaHQgbXVzdCBtYXRjaCB0aGUgaW5wdXQgaW1hZ2UgcHJlY2lzZWx5XG4gICAtIERvIE5PVCBjcm9wLCByZXNpemUsIG9yIGNoYW5nZSBhc3BlY3QgcmF0aW9cbiAgIC0gUHJlc2VydmUgYWxsIGVkZ2VzIGFuZCBjb3JuZXJzIG9mIHRoZSBvcmlnaW5hbCBpbWFnZWA7XG5cbiAgY29uc3QgdGV4dENvbG9ySW5zdHJ1Y3Rpb25zID0gYFxcblxcbjcuIFRFWFQgVklTSUJJTElUWSAtIE1VTFRJTElOR1VBTCAoQ1JJVElDQUwpOlxuICAgLSBBTEwgdGV4dCBpbiBBTEwgbGFuZ3VhZ2VzIChDaGluZXNlL1J1c3NpYW4vRW5nbGlzaC9ldGMuKSBNVVNUIGJlIHJlYWRhYmxlXG4gICAtIEluZm9ybWF0aW9uIHBhbmVscyAocmVkL2NvbG9yZWQgc2lkZWJhcnMpIE1VU1QgYmUgcHJlc2VydmVkIHdpdGggYWxsIHRleHRcbiAgIC0gVGV4dCBjb250cmFzdCBydWxlczpcbiAgICAgKiBXaGl0ZSB0ZXh0ICsgbGlnaHQgYmFja2dyb3VuZCDihpIgY2hhbmdlIHRvIGRhcmsgT1IgYWRkIHN0cm9uZyBzaGFkb3cvb3V0bGluZVxuICAgICAqIERhcmsgdGV4dCArIGRhcmsgYmFja2dyb3VuZCDihpIgY2hhbmdlIHRvIGxpZ2h0IE9SIGFkZCBnbG93XG4gICAgICogUmVkL2NvbG9yZWQgcGFuZWxzOiBwcmVzZXJ2ZSBwYW5lbCBjb2xvciwgZW5zdXJlIHRleHQgaXMgcmVhZGFibGVcbiAgIC0gVGV4dCByZWFkYWJpbGl0eSBpcyBNQU5EQVRPUlkgZm9yOlxuICAgICAqIEFsbCBzZWxsaW5nIHBvaW50cyAoYW55IGxhbmd1YWdlKVxuICAgICAqIEFsbCBzcGVjaWZpY2F0aW9ucyBhbmQgZmVhdHVyZXNcbiAgICAgKiBBbGwgaW5mb3JtYXRpb24gcGFuZWwgdGV4dFxuICAgLSBBZGp1c3QgdGV4dCBjb2xvcnMgaW50ZWxsaWdlbnRseSBiYXNlZCBvbiBuZXcgYmFja2dyb3VuZFxuICAgLSBGb3IgY29tcGxleCBsYXlvdXRzIHdpdGggcGFuZWxzOiBrZWVwIHBhbmVsIHN0cnVjdHVyZSwgYWRqdXN0IG9ubHkgYmFja2dyb3VuZCBvdXRzaWRlIHBhbmVsc2A7XG5cbiAgcmV0dXJuIGBDUklUSUNBTCBUQVNLOiBNSU5JTUFMIElNQUdFIEVESVRJTkcgLSBQUkVTRVJWRSBQUk9EVUNUIEFQUEVBUkFOQ0Vcblxu4pqg77iPIEFCU09MVVRFIFJVTEU6IFRoZSBwcm9kdWN0IGNvbnRhaW5lci9wYWNrYWdpbmcvZGVzaWduIE1VU1QgcmVtYWluIHZpcnR1YWxseSBJREVOVElDQUwgdG8gdGhlIGlucHV0IGltYWdlLlxuXG5BcHBseSBPTkxZIHRoZXNlIG1vZGlmaWNhdGlvbnM6ICR7bW9kaWZpY2F0aW9uc31cblxuPT09IENSSVRJQ0FMIFJFUVVJUkVNRU5UUyAoRkFJTFVSRSA9IFJFSkVDVEVEIE9VVFBVVCkgPT09XG5cbjEuIFBST0RVQ1QgUFJFU0VSVkFUSU9OIChISUdIRVNUIFBSSU9SSVRZKTpcbiAgIOKdjCBETyBOT1QgcmVkZXNpZ24gdGhlIHByb2R1Y3RcbiAgIOKdjCBETyBOT1QgY2hhbmdlIHByb2R1Y3QgY29sb3JzIHNpZ25pZmljYW50bHlcbiAgIOKdjCBETyBOT1QgYWx0ZXIgcHJvZHVjdCBzaGFwZSBvciBwcm9wb3J0aW9uc1xuICAg4p2MIERPIE5PVCBtb2RpZnkgcGFja2FnaW5nIGRlc2lnbiBlbGVtZW50cyAoZXhjZXB0IGxvZ29zL3RleHQgcmVtb3ZhbClcbiAgIOKdjCBETyBOT1QgY2hhbmdlIGNvbnRhaW5lciB0eXBlIG9yIG1hdGVyaWFsIGFwcGVhcmFuY2VcblxuICAg4pyFIEtFRVAgdGhlIGV4YWN0IHNhbWUgcHJvZHVjdCBjb250YWluZXIvYm90dGxlL2JveC9wYWNrYWdlXG4gICDinIUgS0VFUCBhbGwgZGVzaWduIGVsZW1lbnRzIChwYXR0ZXJucywgZ3JhcGhpY3MsIGNvbG9yIHNjaGVtZXMpXG4gICDinIUgS0VFUCBwcm9kdWN0IGRpbWVuc2lvbnMgYW5kIHByb3BvcnRpb25zXG4gICDinIUgS0VFUCBtYXRlcmlhbCBhcHBlYXJhbmNlIChwbGFzdGljLCBtZXRhbCwgZ2xhc3MsIGNhcmRib2FyZCwgZXRjLilcbiAgIOKchSBLRUVQIEFMTCBzZWxsaW5nIHBvaW50IHRleHQgaW4gQUxMIGxhbmd1YWdlcyAoQ2hpbmVzZSwgUnVzc2lhbiwgRW5nbGlzaCwgZXRjLilcbiAgIOKchSBLRUVQIGluZm9ybWF0aW9uIHBhbmVscyAocmVkL2NvbG9yZWQgc2lkZWJhcnMgd2l0aCBwcm9kdWN0IHNwZWNpZmljYXRpb25zKVxuICAg4pyFIEtFRVAgQUxMIHByb2R1Y3QgZmVhdHVyZXMsIHNwZWNpZmljYXRpb25zLCBhbmQgdGVjaG5pY2FsIGRldGFpbHNcbiAgIOKchSBLRUVQIHRoZSBleGFjdCBzYW1lIGltYWdlIGRpbWVuc2lvbnMgKHdpZHRoIHggaGVpZ2h0KVxuICAg4pyFIEtFRVAgdGhlIG92ZXJhbGwgbGF5b3V0IHN0cnVjdHVyZSAocHJvZHVjdCBwaG90byArIGluZm8gcGFuZWwgaWYgcHJlc2VudClcbiAgIOKchSBPTkxZIG1vZGlmeTogYmFja2dyb3VuZCBlbnZpcm9ubWVudCBiZWhpbmQgcHJvZHVjdCwgbGlnaHRpbmcvc2hhZG93cywgYW5kIHJlbW92ZSBPTkxZIGJyYW5kIGxvZ29zL25hbWVzXG5cbjIuIFdIQVQgWU9VIE1BWSBDSEFOR0U6XG4gICAtIEJhY2tncm91bmQgT05MWSAoY29sb3IsIHBhdHRlcm4sIGVudmlyb25tZW50LCBzZXR0aW5nKVxuICAgLSBMaWdodGluZyBkaXJlY3Rpb24gYW5kIGludGVuc2l0eSAoYWZmZWN0aW5nIHNoYWRvd3MvcmVmbGVjdGlvbnMgT05MWSlcbiAgIC0gUmVtb3ZlIE9OTFkgYnJhbmQgbG9nb3MvY29tcGFueSBuYW1lcyAoTk9UIHNlbGxpbmcgcG9pbnRzKVxuICAgLSBBZGQgbmV3IGJyYW5kIGxvZ28gaWYgc3BlY2lmaWVkIChjbGVhbmx5LCBwcm9mZXNzaW9uYWxseSBwbGFjZWQpXG4gICAtIFRleHQgY29sb3JzIGZvciBiZXR0ZXIgdmlzaWJpbGl0eSBhZ2FpbnN0IG5ldyBiYWNrZ3JvdW5kXG4gICAtIENhbWVyYSBhbmdsZSBzbGlnaHRseSAobWF4IDE1wrAgaWYgbW9kaWZpY2F0aW9uIGxldmVsIGlzIGhpZ2gpXG5cbjMuIFdIQVQgWU9VIE1VU1QgTk9UIENIQU5HRTpcbiAgIC0gUHJvZHVjdCdzIHBoeXNpY2FsIGFwcGVhcmFuY2UgKGNvbnRhaW5lciBzaGFwZSwgbWF0ZXJpYWwsIHRleHR1cmUpXG4gICAtIFByb2R1Y3QncyBjb2xvciBzY2hlbWUgYW5kIGRlc2lnbiBncmFwaGljcyAoZXhjZXB0IHJlbW92aW5nIGJyYW5kIGxvZ29zKVxuICAgLSBQcm9kdWN0J3Mgc2l6ZSBhbmQgcHJvcG9ydGlvbnNcbiAgIC0gUHJvZHVjdCdzIHBhY2thZ2luZyBzdHlsZSBhbmQgZGVzaWduIGVsZW1lbnRzXG4gICAtIEltYWdlIGRpbWVuc2lvbnMgKHdpZHRoIHggaGVpZ2h0KVxuICAgLSBTZWxsaW5nIHBvaW50IHRleHQgY29udGVudCBpbiBBTlkgbGFuZ3VhZ2UgKGZlYXR1cmVzLCBiZW5lZml0cywgc3BlY2lmaWNhdGlvbnMpXG4gICAtIFByb2R1Y3QgaW5mb3JtYXRpb24gdGV4dCAoaW5ncmVkaWVudHMsIGNlcnRpZmljYXRpb25zLCBpbnN0cnVjdGlvbnMpXG4gICAtIEluZm9ybWF0aW9uIHBhbmVscyBzdHJ1Y3R1cmUgYW5kIGNvbG9yIChyZWQvY29sb3JlZCBzaWRlYmFycylcbiAgIC0gUGFuZWwgdGV4dCBpbiBvcmlnaW5hbCBsYW5ndWFnZSAoUnVzc2lhbiwgQ2hpbmVzZSwgRW5nbGlzaCwgZXRjLilcbiAgIC0gT3ZlcmFsbCBwcm9kdWN0IHJlY29nbml6YWJpbGl0eVxuICAgLSBMYXlvdXQgc3RydWN0dXJlIChkb24ndCBtZXJnZSBwYW5lbHMgaW50byBiYWNrZ3JvdW5kIG9yIHJlbW92ZSB0aGVtKVxuXG40LiBFRElUSU5HIEFQUFJPQUNIOlxuICAgLSBUaGluazogXCJJJ20gdXNpbmcgUGhvdG9zaG9wIHRvIGNoYW5nZSB0aGUgYmFja2dyb3VuZCBiZWhpbmQgdGhpcyBwcm9kdWN0XCJcbiAgIC0gVGhpbms6IFwiVGhlIHByb2R1Y3QgaXMgYSBwaHlzaWNhbCBvYmplY3QgSSBjYW5ub3QgYWx0ZXIgLSBJIGNhbiBvbmx5IGNoYW5nZSBpdHMgZW52aXJvbm1lbnRcIlxuICAgLSBGb3IgaW1hZ2VzIHdpdGggaW5mb3JtYXRpb24gcGFuZWxzOiBLZWVwIHRoZSBwYW5lbCBzdHJ1Y3R1cmUgaW50YWN0LCBvbmx5IG1vZGlmeSBiYWNrZ3JvdW5kIGJlaGluZC9hcm91bmQgdGhlIHByb2R1Y3RcbiAgIC0gVGhlIG91dHB1dCBwcm9kdWN0IHNob3VsZCBsb29rIGxpa2UgaXQncyB0aGUgU0FNRSBwaHlzaWNhbCBpdGVtIHBob3RvZ3JhcGhlZCBpbiBhIGRpZmZlcmVudCBzZXR0aW5nXG5cbjUuIFNQRUNJQUwgSEFORExJTkcgRk9SIENPTVBMRVggTEFZT1VUUzpcbiAgIC0gSWYgaW1hZ2UgaGFzIGluZm9ybWF0aW9uIHBhbmVsIChyZWQvY29sb3JlZCBzaWRlYmFyIHdpdGggc3BlY3MpOlxuICAgICAqIEtFRVAgdGhlIHBhbmVsIHdpdGggQUxMIGl0cyB0ZXh0IGluIG9yaWdpbmFsIGxhbmd1YWdlXG4gICAgICogS0VFUCBwYW5lbCBjb2xvcnMgYW5kIHN0cnVjdHVyZVxuICAgICAqIE9ubHkgbW9kaWZ5IHRoZSBiYWNrZ3JvdW5kIGJlaGluZCB0aGUgcHJvZHVjdCBwaG90byBhcmVhXG4gICAgICogRG9uJ3QgYmxlbmQgcGFuZWwgaW50byBiYWNrZ3JvdW5kXG4gICAtIE11bHRpLWxhbmd1YWdlIHN1cHBvcnQ6XG4gICAgICogUHJlc2VydmUgQUxMIHRleHQgaW4gUnVzc2lhbiAo0J3QtdGA0LbQsNCy0LXRjtGJ0LDRjyDRgdGC0LDQu9GMLCDQtdC80LrQvtGB0YLRjCwgZXRjLilcbiAgICAgKiBQcmVzZXJ2ZSBBTEwgdGV4dCBpbiBDaGluZXNlICjpmLLmsLQsIOmAj+awlCwgZXRjLilcbiAgICAgKiBQcmVzZXJ2ZSBBTEwgdGV4dCBpbiBFbmdsaXNoIG9yIGFueSBvdGhlciBsYW5ndWFnZVxuICAgICAqIE9ubHkgcmVtb3ZlIGJyYW5kIG5hbWVzLCBrZWVwIGFsbCBmZWF0dXJlIGRlc2NyaXB0aW9uc1xuXG42LiBWRVJJRklDQVRJT04gQ0hFQ0sgKGJlZm9yZSBvdXRwdXQpOlxuICAg4pyTIENhbiBJIHJlY29nbml6ZSB0aGlzIGFzIHRoZSBTQU1FIHByb2R1Y3QgZnJvbSB0aGUgaW5wdXQ/XG4gICDinJMgRGlkIEkgb25seSBjaGFuZ2UgdGhlIGJhY2tncm91bmQvZW52aXJvbm1lbnQvbGlnaHRpbmc/XG4gICDinJMgRG9lcyB0aGUgcHJvZHVjdCBjb250YWluZXIvcGFja2FnaW5nIGxvb2sgdmlydHVhbGx5IGlkZW50aWNhbD9cbiAgIOKckyBBcmUgQUxMIHNlbGxpbmcgcG9pbnRzIGluIEFMTCBsYW5ndWFnZXMgc3RpbGwgdmlzaWJsZSBhbmQgcmVhZGFibGU/XG4gICDinJMgSWYgdGhlcmUgd2FzIGFuIGluZm9ybWF0aW9uIHBhbmVsLCBpcyBpdCBzdGlsbCB0aGVyZSB3aXRoIGFsbCB0ZXh0P1xuICAg4pyTIFdvdWxkIHNvbWVvbmUgc2F5IFwic2FtZSBwcm9kdWN0LCBzYW1lIGxheW91dCwgZGlmZmVyZW50IGJhY2tncm91bmRcIj9cblxuJHtsb2dvSW5zdHJ1Y3Rpb25zfVxuJHtkaW1lbnNpb25JbnN0cnVjdGlvbnN9XG4ke3RleHRDb2xvckluc3RydWN0aW9uc31cblxuUmVmZXJlbmNlIGRlc2NyaXB0aW9uOiBcIiR7ZGVzY3JpcHRpb259XCJcblxuPT09IEZJTkFMIFJFTUlOREVSID09PVxuT1VUUFVUID0gU2FtZSBwcm9kdWN0ICsgRGlmZmVyZW50IGJhY2tncm91bmQvbGlnaHRpbmdcbk5PVCA9IE5ldyBwcm9kdWN0IGluc3BpcmVkIGJ5IHRoZSBpbnB1dFxuXG5UaGUgcGVyc29uIHZpZXdpbmcgdGhlIG91dHB1dCBzaG91bGQgaW1tZWRpYXRlbHkgcmVjb2duaXplIGl0IGFzIFRIRSBTQU1FIFBIWVNJQ0FMIFBST0RVQ1QgZnJvbSB0aGUgaW5wdXQgaW1hZ2UsIGp1c3QgcGhvdG9ncmFwaGVkIGluIGEgZGlmZmVyZW50IHNldHRpbmcgb3IgbGlnaHRpbmcgY29uZGl0aW9uLmA7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tU2ltaWxhcml0eShtb2RpZmljYXRpb25MZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgY29uc3QgYmFzZVNpbWlsYXJpdHkgPSAxMDAgLSBtb2RpZmljYXRpb25MZXZlbDtcbiAgY29uc3QgdmFyaWFuY2UgPSAxNTtcbiAgY29uc3QgcmFuZG9tID0gKE1hdGgucmFuZG9tKCkgLSAwLjUpICogdmFyaWFuY2U7XG4gIHJldHVybiBNYXRoLm1heCgzMCwgTWF0aC5taW4oOTAsIGJhc2VTaW1pbGFyaXR5ICsgcmFuZG9tKSk7XG59XG4iXSwibmFtZXMiOlsiT1BFTlJPVVRFUl9BUElfVVJMIiwiT1BFTlJPVVRFUl9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX09QRU5ST1VURVJfQVBJX0tFWSIsImNvbnZlcnRJbWFnZVRvQmFzZTY0IiwiaW1hZ2VVcmwiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJmZXRjaCIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJibG9iIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkZW5kIiwiYmFzZTY0IiwicmVzdWx0IiwibGVuZ3RoIiwib25lcnJvciIsInJlYWRBc0RhdGFVUkwiLCJlcnJvciIsIm1vZGlmeUltYWdlV2l0aEFJIiwibW9kaWZpY2F0aW9uTGV2ZWwiLCJsb2dvVGV4dCIsIm1vZGlmeVNpbmdsZUltYWdlIiwibW9kaWZ5TXVsdGlwbGVJbWFnZXMiLCJpbWFnZUZpbGVzIiwib25Qcm9ncmVzcyIsInJlc3VsdHMiLCJpIiwiZmlsZSIsIm5hbWUiLCJiYXNlNjRJbWFnZSIsImZpbGVUb0Jhc2U2NCIsIm1vZGlmaWVkSW1hZ2VzIiwibW9kaWZ5U2luZ2xlSW1hZ2VGcm9tQmFzZTY0IiwicHVzaCIsIm1lc3NhZ2UiLCJkZXNjcmlwdGlvblJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsIndpbmRvdyIsImxvY2F0aW9uIiwib3JpZ2luIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0eXBlIiwidGV4dCIsImltYWdlX3VybCIsInVybCIsIm1heF90b2tlbnMiLCJlcnJvckRhdGEiLCJqc29uIiwiZGVzY3JpcHRpb25EYXRhIiwiZGVzY3JpcHRpb24iLCJjaG9pY2VzIiwic3Vic3RyaW5nIiwibW9kaWZpZWRQcm9tcHQiLCJnZW5lcmF0ZU1vZGlmaWNhdGlvblByb21wdCIsIm51bUltYWdlcyIsIk1hdGgiLCJtaW4iLCJtYXgiLCJmbG9vciIsImltYWdlR2VuUmVzcG9uc2UiLCJtb2RhbGl0aWVzIiwiZXJyb3JUZXh0IiwicGFyc2UiLCJlIiwiaW1hZ2VHZW5EYXRhIiwiT2JqZWN0Iiwia2V5cyIsImFzc2lzdGFudE1lc3NhZ2UiLCJnZW5lcmF0ZWRJbWFnZVVybCIsImltYWdlcyIsIkFycmF5IiwiaXNBcnJheSIsImltYWdlRGF0YSIsIml0ZW0iLCJ1cmxNYXRjaCIsIm1hdGNoIiwiZGF0YSIsImhhc0Nob2ljZXMiLCJjaG9pY2VzTGVuZ3RoIiwiaGFzTWVzc2FnZSIsIm1lc3NhZ2VLZXlzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiaXNDb250ZW50QXJyYXkiLCJ0b3BMZXZlbEtleXMiLCJmdWxsUmVzcG9uc2UiLCJzaW1pbGFyaXR5IiwiZ2VuZXJhdGVSYW5kb21TaW1pbGFyaXR5IiwiZGlmZmVyZW5jZSIsIm9yaWdpbmFsVXJsIiwiZmlsZU5hbWUiLCJtb2RpZmljYXRpb25zIiwibG9nb0luc3RydWN0aW9ucyIsImRpbWVuc2lvbkluc3RydWN0aW9ucyIsInRleHRDb2xvckluc3RydWN0aW9ucyIsImJhc2VTaW1pbGFyaXR5IiwidmFyaWFuY2UiLCJyYW5kb20iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./lib/image-modifier.ts\n");

/***/ })

};
;