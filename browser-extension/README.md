# Ozon商品图片处理浏览器插件

这是一个Chrome/Edge浏览器插件，用于在Ozon商品页面提取图片和描述，并发送到AI处理系统。

## 功能特点

- 🎯 **一键提取**：在Ozon商品页面一键提取所有商品图片和描述
- 🚀 **智能处理**：自动发送到后端AI系统进行图片修改和文本改写
- 👁️ **实时跟踪**：查看任务处理进度和结果
- ⚙️ **配置管理**：快捷访问处理参数配置页面

## 安装方法

### Chrome浏览器

1. 打开Chrome浏览器，访问 `chrome://extensions/`
2. 开启右上角的"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择 `browser-extension` 文件夹
5. 插件安装完成！

### Edge浏览器

1. 打开Edge浏览器，访问 `edge://extensions/`
2. 开启左下角的"开发人员模式"
3. 点击"加载解压缩的扩展"
4. 选择 `browser-extension` 文件夹
5. 插件安装完成！

## 使用方法

### 1. 访问Ozon商品页面

打开任意Ozon商品详情页，例如：
```
https://www.ozon.ru/product/xiaomi-redmi-note-12-pro-256gb-8gb-black-123456789/
```

### 2. 点击插件图标

在浏览器工具栏中点击插件图标，会弹出操作面板。

### 3. 提取商品数据

点击"提取商品数据"按钮，插件会自动提取：
- 商品标题
- 所有商品图片URL（自动过滤logo和小图）
- 商品描述和特性

### 4. 发送到AI处理

提取成功后，点击"发送到AI处理"按钮：
- 数据会发送到Web应用后端
- 自动创建处理任务
- 自动打开任务详情页面，查看实时进度

### 5. 查看处理结果

在任务详情页面可以：
- 查看处理进度（实时更新）
- 预览原图和修改后的图片对比
- 下载单张或批量下载所有修改后的图片
- 查看原始描述和改写后的描述对比

## 配置API地址

插件默认连接到 `http://localhost:3000`（本地开发环境）。

如果你的Web应用部署在其他地址，请修改 `popup.js` 第一行：

```javascript
const API_BASE_URL = 'https://your-domain.com';
```

## 图标说明

插件需要以下图标文件（放在 `icons` 文件夹）：
- `icon16.png` - 16x16像素
- `icon32.png` - 32x32像素
- `icon48.png` - 48x48像素
- `icon128.png` - 128x128像素

你可以使用任意图片编辑工具创建这些图标，建议使用绿色主题配合AI/图片处理的视觉元素。

## 工作原理

```
[Ozon商品页面]
    ↓ 用户点击插件
[Content Script] 提取图片URL和描述
    ↓ 发送到
[Popup Script] 显示提取结果
    ↓ 用户确认后
[API请求] POST /api/tasks/create
    ↓ 后端创建任务
[Edge Function] 异步处理图片和文本
    ↓ 实时更新进度
[Web页面] 显示进度和结果
```

## 支持的页面

- ✅ Ozon商品详情页 (`https://www.ozon.ru/product/*`)
- ❌ 其他页面（会提示"请在Ozon商品页面使用此功能"）

## 权限说明

插件请求的权限：
- `activeTab` - 访问当前标签页（仅在点击插件时）
- `storage` - 保存上次任务ID，方便快速访问
- `https://www.ozon.ru/*` - 在Ozon网站提取数据

**注意**：插件不会收集或上传任何用户隐私数据，仅提取公开的商品信息。

## 常见问题

### Q: 插件无法提取图片？
A: 请确保：
1. 你在Ozon商品详情页（不是列表页）
2. 页面已完全加载完成
3. 刷新页面后重试

### Q: "提交任务失败"错误？
A: 检查：
1. Web应用是否正在运行
2. API地址配置是否正确
3. 浏览器控制台是否有CORS错误

### Q: 提取的图片数量很少？
A: Ozon的图片可能是延迟加载的，请：
1. 滚动到页面底部，查看所有图片
2. 稍等片刻让图片完全加载
3. 然后再点击提取

## 开发和调试

查看插件日志：
1. 打开 `chrome://extensions/`
2. 找到此插件，点击"背景页"或"检查视图"
3. 在控制台查看日志输出

调试内容脚本：
1. 在Ozon商品页面按F12打开开发者工具
2. 在控制台输入 `extractOzonProductData()` 测试提取功能
3. 查看输出的数据结构

## 技术栈

- Manifest V3（Chrome扩展最新标准）
- Vanilla JavaScript（无框架依赖）
- Chrome Extensions API
- Fetch API（与后端通信）

## 未来计划

- [ ] 支持批量处理多个商品
- [ ] 添加快捷键支持
- [ ] 支持其他电商平台（淘宝、京东等）
- [ ] 内置图片预览功能
- [ ] 支持自定义处理参数

## 许可证

MIT License
